(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(t,e,n){"use strict";n.r(e);var r,a=n(0),o=n.n(a),u=n(7),c=n.n(u),i=n(23),d=n(40),s=n(86),f=n(16),l=n(30);!function(t){t.NonAuthentificated="NonAuthentificated",t.OnGoingAuthentification="OnGoingAuthentification",t.Authentificated="Authentificated"}(r||(r={}));var p={username:"",token:"",state:r.NonAuthentificated},v=n(15),b=n(33),m=Object(d.c)({authentication:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l.c:var n=e.payload,a=n.username,o=n.token;return Object(f.a)({},t,{username:a,token:o,state:r.Authentificated});case l.a:return Object(f.a)({},t,{state:r.NonAuthentificated});case l.b:return Object(f.a)({},t,{state:r.OnGoingAuthentification});default:return t}},notification:v.b,todolist:b.b}),h=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,O=Object(d.e)(m,h(Object(d.a)(s.a))),g=n(51),j=n(43),E=n(158);function w(t){switch(Object(i.c)(function(t){return t.authentication.state})){case r.OnGoingAuthentification:case r.NonAuthentificated:return o.a.createElement(j.a,{to:{pathname:"/login",search:"?redirect=".concat(encodeURIComponent(t.location.pathname))}});case r.Authentificated:return o.a.createElement(a.Suspense,{fallback:o.a.createElement(E.a,null)},t.children)}}function y(t){var e=Object(j.g)(w);return function(n){return o.a.createElement(e,null,o.a.createElement(t,n))}}var k=n(48),_=n(79),T=n(167),S=n(168),N=n(160),x=n(166),A=n(162),I=n(125),C=n(161),P=Object(_.a)({cardContainer:{padding:20,textAlign:"center"},card:{display:"inline-block",maxWidth:345},hint:{fontSize:12},media:{height:140}});var L=Object(j.g)(function(t){var e=P(),n=Object(i.c)(function(t){return t.authentication.state}),u=Object(i.b)(),c=Object(a.useState)(""),d=Object(k.a)(c,2),s=d[0],f=d[1],p=Object(a.useState)(""),v=Object(k.a)(p,2),b=v[0],m=v[1],h=n===r.NonAuthentificated&&s&&b,O=n===r.OnGoingAuthentification;if(n===r.Authentificated){var g=new URLSearchParams(t.location.search).get("redirect")||"/";return o.a.createElement(j.a,{to:g})}return o.a.createElement("div",{className:e.cardContainer},o.a.createElement(N.a,{className:e.card},o.a.createElement(C.a,{className:e.media,image:"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg",title:"Eiffel Tower"}),o.a.createElement(A.a,null,o.a.createElement(I.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Welcome to TodoList React with redux-thunk"),o.a.createElement(I.a,{className:e.hint,color:"textSecondary",gutterBottom:!0},"Try with password: \u201cpassword\u201d"),o.a.createElement(S.a,{label:"Username",value:s,onChange:function(t){return f(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&h&&(u(Object(l.d)(s,b)),t.preventDefault())}}),o.a.createElement("br",null),o.a.createElement(S.a,{label:"Password",type:"password",value:b,onChange:function(t){return m(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&h&&(u(Object(l.d)(s,b)),t.preventDefault())}})),o.a.createElement(x.a,null,o.a.createElement(T.a,{color:"primary",disabled:!h,onClick:function(){return u(Object(l.d)(s,b))}},"Login"),O?o.a.createElement(E.a,{size:24}):o.a.createElement(o.a.Fragment,null))))}),D=n(91),R=n(37),G=n(61),U=n(19);function F(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}var W=Object(G.withSnackbar)(function(t){var e=t.enqueueSnackbar,n=Object(a.useState)({}),r=Object(k.a)(n,2),o=r[0],u=r[1],c=Object(i.c)(function(t){return t.notification.notifications}),d=Object(i.b)();return Object(a.useEffect)(function(){var t=function(t){switch(t){case v.a.Success:return"success";case v.a.Info:return"info";case v.a.Warn:return"warning";case v.a.Error:return"error";case v.a.Log:default:return"default"}},n=!0,r=!1,a=void 0;try{for(var i,s=function(){var n=i.value;if(o[n.id])return"continue";u(function(t){return Object(f.a)({},t,Object(R.a)({},n.id,!0))}),e(n.message,{variant:t(n.level),onClose:function(){u(function(t){var e=n.id;return t[e],Object(D.a)(t,[e].map(F))})}}),d(Object(U.d)(n.id))},l=c[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)s()}catch(p){r=!0,a=p}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}},[c,o,d,e]),null}),J=function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,208))},M=o.a.lazy(J),B=function(){var t=Object(i.b)();return Object(a.useEffect)(function(){J()},[]),Object(a.useEffect)(function(){t(Object(l.e)())},[t]),o.a.createElement("div",{className:"App"},o.a.createElement(G.SnackbarProvider,{maxSnack:3},o.a.createElement(W,null),o.a.createElement(g.a,null,o.a.createElement(j.d,null,o.a.createElement(j.b,{exact:!0,path:"/login",component:L}),o.a.createElement(j.b,{component:y(M)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(i.a,{store:O},o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},15:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r,a=n(62),o=n(16),u=n(19);!function(t){t.Log="Log",t.Success="Success",t.Info="Info",t.Warn="Warn",t.Error="Error"}(r||(r={}));var c={notifications:[]};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u.a:var n=e.payload,r=n.id,i=n.message,d=n.level;return Object(o.a)({},t,{notifications:[].concat(Object(a.a)(t.notifications),[{id:r,message:i,level:d}])});case u.b:var s=e.payload.id;return Object(o.a)({},t,{notifications:t.notifications.filter(function(t){return t.id!==s})});default:return t}}},19:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return u});var r="NOTIFICATION_ADD",a="NOTIFICATION_REMOVE",o=function(t,e){return{type:r,payload:{id:Math.random().toString(16).substr(2),message:t,level:e}}},u=function(t){return{type:a,payload:{id:t}}}},21:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"c",function(){return d}),n.d(e,"g",function(){return s}),n.d(e,"j",function(){return f}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return v}),n.d(e,"i",function(){return b}),n.d(e,"a",function(){return m}),n.d(e,"e",function(){return h}),n.d(e,"h",function(){return O});var r=n(12),a=n.n(r),o=n(62),u=n(26),c=function(){var t=window.validToken||"w\u20aclc0Me";return window.validToken=t,t},i=function(t,e){return"password"!==e?E(500):j({username:t,token:c()},500)},d=function(t){return t!==c()?j(!1,500):j(!0,500)},s=function(t,e){return localStorage.getItem("".concat(t,"::").concat(e))||""},f=function(t,e,n){return localStorage.setItem("".concat(t,"::").concat(e),n)},l=function(t,e){return localStorage.removeItem("".concat(t,"::").concat(e))},p=function(){var t=s("Todos","data");return t?JSON.parse(t):[]},v=function(t,e,n){var r={_i:{}},a=function a(){if(t!==c())return r._i._handleId=void 0,void n();var o=p();(function(t){if(void 0===r._i._data)return!0;if(r._i._data.length!==t.length)return!0;return!!r._i._data.some(function(e,n){return r=e,a=t[n],!(r.guid===a.guid&&r.task===a.task&&r.done===a.done);var r,a})})(o)&&(r._i._data=o,e(o)),r._i._handleId=setTimeout(function(){return a()},500)};return r._i._handleId=setTimeout(function(){return a()},500),r},b=function(t){t._i._handleId&&clearTimeout(t._i._handleId)},m=function(){var t=Object(u.a)(a.a.mark(function t(e,n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(500);case 2:if(e===c()){t.next=4;break}return t.abrupt("return",!1);case 4:if(!(r=p()).some(function(t){return t.guid===n.guid})){t.next=7;break}return t.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify([].concat(Object(o.a)(r),[n]))),t.abrupt("return",!0);case 9:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(a.a.mark(function t(e,n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(500);case 2:if(e===c()){t.next=4;break}return t.abrupt("return",!1);case 4:if((r=p()).some(function(t){return t.guid===n.guid})){t.next=7;break}return t.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify(r.map(function(t){return t.guid===n.guid?n:t}))),t.abrupt("return",!0);case 9:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(a.a.mark(function t(e,n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(500);case 2:if(e===c()){t.next=4;break}return t.abrupt("return",!1);case 4:if((r=p()).some(function(t){return t.guid===n.guid})){t.next=7;break}return t.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify(r.filter(function(t){return t.guid!==n.guid}))),t.abrupt("return",!0);case 9:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),g=function(t){return new Promise(function(e,n){setTimeout(function(){return e()},t)})},j=function(t,e){return new Promise(function(n,r){setTimeout(function(){return n(t)},e)})},E=function(t){return new Promise(function(e,n){setTimeout(function(){return n()},t)})}},30:function(t,e,n){"use strict";n.d(e,"c",function(){return d}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return O});var r=n(12),a=n.n(r),o=n(26),u=n(21),c=n(19),i=n(15),d="AUTHENTICATION_LOGIN_SUCCESS",s="AUTHENTICATION_LOGIN_FAILURE",f="AUTHENTICATION_LOGIN_ON_GOING",l=function(t,e){return{type:d,payload:{username:t,token:e}}},p=function(){return{type:s,payload:{}}},v=function(){return{type:f,payload:{}}},b=function(t,e){u.j("AuthentificationProvider","username",t),u.j("AuthentificationProvider","token",e)},m=function(t,e){return function(){var n=Object(o.a)(a.a.mark(function n(r){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(v()),n.prev=1,n.next=4,u.f(t,e);case 4:o=n.sent,b(o.username,o.token),r(l(o.username,o.token)),r(Object(c.c)("Login successful",i.a.Success)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),r(p()),r(Object(c.c)("Login failure",i.a.Error));case 14:case"end":return n.stop()}},n,null,[[1,10]])}));return function(t){return n.apply(this,arguments)}}()},h=function(){return function(){var t=Object(o.a)(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.g("AuthentificationProvider","username"),""!==(r=u.g("AuthentificationProvider","token"))){t.next=4;break}return t.abrupt("return");case 4:return e(v()),t.next=7,u.c(r);case 7:t.sent?(b(n,r),e(l(n,r)),e(Object(c.c)("Login successful",i.a.Success))):e(p());case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(o.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.d("AuthentificationProvider","username"),u.d("AuthentificationProvider","token"),n(p()),t||n(Object(c.c)("Logout successful",i.a.Success));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},33:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r,a=n(37),o=n(16),u=n(52);!function(t){t.Noop="noop",t.Add="add",t.Edit="edit",t.Remove="remove"}(r||(r={}));var c={ready:!1,todos:[]};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u.a:var n=e.payload,i=n.todo,d=n.state,s=[],f=!1,l=!0,p=!1,v=void 0;try{for(var b,m=t.todos[Symbol.iterator]();!(l=(b=m.next()).done);l=!0){var h=b.value;h.data.guid===i.guid?(f=!0,s.push({data:i,state:d})):s.push(h)}}catch(y){p=!0,v=y}finally{try{l||null==m.return||m.return()}finally{if(p)throw v}}return f||s.push({data:i,state:d}),Object(o.a)({},t,{todos:s});case u.c:var O=e.payload.guid;return Object(o.a)({},t,{todos:t.todos.filter(function(t){return t.data.guid!==O})});case u.b:var g=e.payload.todos,j=t.todos.filter(function(t){return t.state===r.Add}).reduce(function(t,e){return Object(o.a)({},t,Object(a.a)({},e.data.guid,e.data))},{}),E=t.todos.filter(function(t){return t.state===r.Edit}).reduce(function(t,e){return Object(o.a)({},t,Object(a.a)({},e.data.guid,e.data))},{}),w=t.todos.filter(function(t){return t.state===r.Remove}).reduce(function(t,e){return Object(o.a)({},t,Object(a.a)({},e.data.guid,e.data))},{});return Object(o.a)({},t,{ready:!0,todos:g.filter(function(t){return void 0===j[t.guid]}).map(function(t){return E[t.guid]?{state:r.Edit,data:E[t.guid]}:w[t.guid]?{state:r.Remove,data:w[t.guid]}:{state:r.Noop,data:t}}).concat(t.todos.filter(function(t){return t.state===r.Add}))});default:return t}}},52:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return p}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return h}),n.d(e,"g",function(){return O}),n.d(e,"f",function(){return g});var r=n(16),a=n(12),o=n.n(a),u=n(26),c=n(21),i=n(33),d=n(19),s=n(15),f="TODOLIST_ADD_OR_EDIT_TODO",l="TODOLIST_REMOVE_TODO",p="TODOLIST_REFRESH_TODOS",v=function(t,e){return{type:f,payload:{todo:t,state:e}}},b=function(t){return{type:l,payload:{guid:t}}},m=function(t){return{type:p,payload:{todos:t}}},h=function(t,e){return function(){var n=Object(u.a)(o.a.mark(function n(r){var a,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=Math.random().toString(16).substr(2),r(v(u={guid:a,task:e,done:!1},i.a.Add)),n.prev=3,n.next=6,c.a(t,u);case 6:n.sent?r(v(u,i.a.Noop)):(r(Object(d.c)("Failed to add todo: ".concat(u.task),s.a.Error)),r(b(u.guid))),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:case"end":return n.stop()}},n,null,[[3,10]])}));return function(t){return n.apply(this,arguments)}}()},O=function(t,e){return function(){var n=Object(u.a)(o.a.mark(function n(a,u){var f,l,p;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=u().todolist.todos,l=f.find(function(t){return t.data.guid===e&&t.state===i.a.Noop})){n.next=5;break}return a(Object(d.c)("No todo available for modification given guid ".concat(e),s.a.Error)),n.abrupt("return");case 5:return p=Object(r.a)({},l.data,{done:!l.data.done}),a(v(p,i.a.Edit)),n.prev=7,n.next=10,c.e(t,l.data);case 10:n.sent?a(v(p,i.a.Noop)):(a(Object(d.c)("Failed to edit todo: ".concat(l.data.task),s.a.Error)),a(v(l.data,l.state))),n.next=16;break;case 14:n.prev=14,n.t0=n.catch(7);case 16:case"end":return n.stop()}},n,null,[[7,14]])}));return function(t,e){return n.apply(this,arguments)}}()},g=function(t,e){return function(){var n=Object(u.a)(o.a.mark(function n(r,a){var u,f;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=a().todolist.todos,f=u.find(function(t){return t.data.guid===e&&t.state===i.a.Noop})){n.next=5;break}return r(Object(d.c)("No todo available for modification given guid ".concat(e),s.a.Error)),n.abrupt("return");case 5:return r(v(f.data,i.a.Remove)),n.prev=6,n.next=9,c.h(t,f.data);case 9:n.sent?r(b(f.data.guid)):(r(Object(d.c)("Failed to remove todo: ".concat(f.data.task),s.a.Error)),r(v(f.data,f.state))),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(6);case 15:case"end":return n.stop()}},n,null,[[6,13]])}));return function(t,e){return n.apply(this,arguments)}}()}},99:function(t,e,n){t.exports=n(121)}},[[99,1,2]]]);
//# sourceMappingURL=main.851ca4ce.chunk.js.map
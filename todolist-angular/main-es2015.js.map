{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/api/index.ts","./src/app/app-routing.module.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/auth/auth-guard.service.ts","./src/app/auth/auth.service.ts","./src/app/authenticated/authenticated-header.component.html","./src/app/authenticated/authenticated-header.component.ts","./src/app/authenticated/authenticated-menu.component.html","./src/app/authenticated/authenticated-menu.component.ts","./src/app/authenticated/authenticated-routing.module.ts","./src/app/authenticated/authenticated.component.html","./src/app/authenticated/authenticated.component.ts","./src/app/authenticated/authenticated.module.ts","./src/app/authenticated/learn-more/learn-more.component.html","./src/app/authenticated/learn-more/learn-more.component.ts","./src/app/authenticated/learn-more/learn-more.module.ts","./src/app/authenticated/not-found/not-found.component.html","./src/app/authenticated/not-found/not-found.component.ts","./src/app/authenticated/not-found/not-found.module.ts","./src/app/authenticated/todolist/todolist.component.html","./src/app/authenticated/todolist/todolist.component.ts","./src/app/authenticated/todolist/todolist.module.ts","./src/app/authenticated/todolist/todolist.service.ts","./src/app/login/login.component.html","./src/app/login/login.component.ts","./src/app/login/login.module.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","/* Login API */\r\n\r\ntype LoginSuccess = {\r\n  username: string;\r\n  token: string;\r\n};\r\nconst validPassword = \"password\";\r\n\r\nconst getValidToken = () => {\r\n  const token = (window as any).validToken || \"w€lc0Me\";\r\n  (window as any).validToken = token;\r\n  return token;\r\n};\r\n\r\nexport const login = (\r\n  username: string,\r\n  password: string\r\n): Promise<LoginSuccess> => {\r\n  if (password !== validPassword) return failure(500);\r\n  return success({ username, token: getValidToken() }, 500);\r\n};\r\n\r\nexport const checkToken = (token: string): Promise<boolean> => {\r\n  if (token !== getValidToken()) return success(false, 500);\r\n  return success(true, 500);\r\n};\r\n\r\n/* Storage API */\r\n\r\nexport const readStorage = (space: string, keyName: string) => {\r\n  return localStorage.getItem(`${space}::${keyName}`) || \"\";\r\n};\r\n\r\nexport const writeStorage = (space: string, keyName: string, value: string) => {\r\n  return localStorage.setItem(`${space}::${keyName}`, value);\r\n};\r\n\r\nexport const clearStorage = (space: string, keyName: string) => {\r\n  return localStorage.removeItem(`${space}::${keyName}`);\r\n};\r\n\r\n/* Todolist */\r\n\r\nexport type Todo = {\r\n  guid: string;\r\n  task: string;\r\n  done: boolean;\r\n};\r\nexport type TodoListenerHandle = {\r\n  _i: {\r\n    _handleId?: ReturnType<typeof setTimeout>;\r\n    _data?: Todo[];\r\n  };\r\n};\r\n\r\nconst readTodos = (): Todo[] => {\r\n  const raw = readStorage(\"Todos\", \"data\");\r\n  if (!raw) return [];\r\n  return JSON.parse(raw);\r\n};\r\n\r\nexport const addTodoListener = (\r\n  token: string,\r\n  fn: (todos: Todo[]) => void,\r\n  connectionLost: () => void\r\n): TodoListenerHandle => {\r\n  const handle: TodoListenerHandle = { _i: {} };\r\n\r\n  const changeDetected = (newData: Todo[]) => {\r\n    if (handle._i._data === undefined) return true;\r\n    if (handle._i._data.length !== newData.length) return true;\r\n\r\n    const sameTodo = (t1: Todo, t2: Todo) =>\r\n      t1.guid === t2.guid && t1.task === t2.task && t1.done === t2.done;\r\n    if (handle._i._data.some((p, idx) => !sameTodo(p, newData[idx])))\r\n      return true;\r\n\r\n    return false;\r\n  };\r\n  const detectChanges = () => {\r\n    if (token !== getValidToken()) {\r\n      handle._i._handleId = undefined;\r\n      connectionLost();\r\n      return;\r\n    }\r\n    const newData = readTodos();\r\n    if (changeDetected(newData)) {\r\n      handle._i._data = newData;\r\n      fn(newData);\r\n    }\r\n    handle._i._handleId = setTimeout(() => detectChanges(), 500);\r\n  };\r\n\r\n  handle._i._handleId = setTimeout(() => detectChanges(), 500);\r\n  return handle;\r\n};\r\n\r\nexport const removeTodoListener = (handle: TodoListenerHandle): void => {\r\n  if (handle._i._handleId) {\r\n    clearTimeout(handle._i._handleId);\r\n  }\r\n};\r\n\r\nexport const addTodo = async (token: string, todo: Todo): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) return false;\r\n\r\n  const data = readTodos();\r\n  if (data.some(t => t.guid === todo.guid)) return false;\r\n\r\n  writeStorage(\"Todos\", \"data\", JSON.stringify([...data, todo]));\r\n  return true;\r\n};\r\n\r\nexport const editTodo = async (token: string, todo: Todo): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) return false;\r\n\r\n  const data = readTodos();\r\n  if (!data.some(t => t.guid === todo.guid)) return false;\r\n\r\n  writeStorage(\r\n    \"Todos\",\r\n    \"data\",\r\n    JSON.stringify(data.map(t => (t.guid === todo.guid ? todo : t)))\r\n  );\r\n  return true;\r\n};\r\n\r\nexport const removeTodo = async (\r\n  token: string,\r\n  todo: Todo\r\n): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) return false;\r\n\r\n  const data = readTodos();\r\n  if (!data.some(t => t.guid === todo.guid)) return false;\r\n\r\n  writeStorage(\r\n    \"Todos\",\r\n    \"data\",\r\n    JSON.stringify(data.filter(t => t.guid !== todo.guid))\r\n  );\r\n  return true;\r\n};\r\n\r\n/* Helpers */\r\n\r\nconst delay = (ms: number): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => resolve(), ms);\r\n  });\r\n};\r\n\r\nconst success = <T>(out: T, ms: number): Promise<T> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => resolve(out), ms);\r\n  });\r\n};\r\n\r\nconst failure = <T>(ms: number): Promise<T> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => reject(), ms);\r\n  });\r\n};\r\n","import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\nimport { AuthGuardService } from \"./auth/auth-guard.service\";\nimport { LoginComponent } from \"./login/login.component\";\n\nconst routes: Routes = [\n  {\n    path: \"login\",\n    component: LoginComponent\n  },\n  {\n    path: \"\",\n    loadChildren: () =>\n      import(\"./authenticated/authenticated.module\").then(\n        mod => mod.AuthenticatedModule\n      ),\n    canActivate: [AuthGuardService],\n    data: { preload: true }\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, { useHash: true })\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","<router-outlet></router-outlet>\n","import { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.css\"]\n})\nexport class AppComponent {}\n","import { BrowserModule } from \"@angular/platform-browser\";\nimport { NgModule } from \"@angular/core\";\n\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { AppComponent } from \"./app.component\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { LoginModule } from \"./login/login.module\";\nimport { AuthenticatedModule } from \"./authenticated/authenticated.module\";\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    LoginModule,\n    AuthenticatedModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { Injectable } from \"@angular/core\";\nimport {\n  CanActivate,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot,\n  CanActivateChild\n} from \"@angular/router\";\nimport { AuthService } from \"./auth.service\";\nimport { map } from \"rxjs/operators\";\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class AuthGuardService implements CanActivate, CanActivateChild {\n  constructor(readonly auth: AuthService) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.auth.isAuthenticated$.pipe(\n      map(isAuth => {\n        if (!isAuth) {\n          this.auth.redirectToLogin(state);\n          return false;\n        }\n        return true;\n      })\n    );\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.canActivate(route, state);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { Observable, BehaviorSubject, Subject } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport * as Api from \"../../api\";\nimport { Router, RouterStateSnapshot } from \"@angular/router\";\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class AuthService {\n  private subject: Subject<AuthState>;\n  readonly state$: Observable<AuthState>;\n  readonly isAuthenticated$: Observable<boolean>;\n\n  constructor(readonly router: Router) {\n    const username = Api.readStorage(\"AuthenticationProvider\", \"username\");\n    const token = Api.readStorage(\"AuthenticationProvider\", \"token\");\n\n    this.subject = new BehaviorSubject({\n      token,\n      username,\n      status: AuthStatus.NonAuthenticated\n    });\n    this.state$ = this.subject.asObservable();\n    this.isAuthenticated$ = this.subject.pipe(\n      map(s => s.status === AuthStatus.Authenticated)\n    );\n\n    if (token.length > 0) {\n      this.subject.next({\n        token,\n        username,\n        status: AuthStatus.OnGoingAuthentication\n      });\n      Api.checkToken(token).then(valid => {\n        if (valid) {\n          this.subject.next({\n            token,\n            username,\n            status: AuthStatus.Authenticated\n          });\n        } else {\n          this.subject.next({\n            token,\n            username,\n            status: AuthStatus.NonAuthenticated\n          });\n        }\n      });\n    }\n  }\n\n  async login(username: string, password: string) {\n    this.subject.next({\n      token: \"\",\n      username: username,\n      status: AuthStatus.OnGoingAuthentication\n    });\n    try {\n      const tokens = await Api.login(username, password);\n      this.subject.next({\n        token: tokens.token,\n        username: tokens.username,\n        status: AuthStatus.Authenticated\n      });\n      Api.writeStorage(\"AuthenticationProvider\", \"username\", tokens.username);\n      Api.writeStorage(\"AuthenticationProvider\", \"token\", tokens.token);\n    } catch (err) {\n      this.subject.next({\n        token: \"\",\n        username: username,\n        status: AuthStatus.NonAuthenticated\n      });\n    }\n  }\n\n  logout() {\n    this.subject.next({\n      token: \"\",\n      username: \"\",\n      status: AuthStatus.NonAuthenticated\n    });\n    Api.clearStorage(\"AuthenticationProvider\", \"username\");\n    Api.clearStorage(\"AuthenticationProvider\", \"token\");\n    this.redirectToLogin(this.router.routerState.snapshot);\n  }\n\n  redirectToLogin(state: RouterStateSnapshot) {\n    this.router.navigate([\"/login\"], {\n      queryParams: {\n        redirect: state.url\n      }\n    });\n  }\n}\n\nexport enum AuthStatus {\n  NonAuthenticated = \"NonAuthenticated\",\n  OnGoingAuthentication = \"OnGoingAuthentication\",\n  Authenticated = \"Authenticated\"\n}\n\nexport type AuthState = {\n  token: string;\n  username: string;\n  status: AuthStatus;\n};\n","<mat-toolbar color=\"primary\" role=\"header\">\n  <button mat-icon-button aria-label=\"Toggle menu\" (click)=\"toggleMenu.emit()\">\n    <mat-icon>menu</mat-icon>\n  </button>\n  <span>Welcome {{ username$ | async }}</span>\n  <span class=\"spacer\"></span>\n  <button mat-icon-button aria-label=\"To-dos\">\n    <mat-icon [matBadge]=\"numTodos$ | async\" matBadgeColor=\"warn\"\n      >shopping_cart</mat-icon\n    >\n  </button>\n  <button mat-icon-button aria-label=\"Logout\" (click)=\"logout()\">\n    <mat-icon>power_settings_new</mat-icon>\n  </button>\n</mat-toolbar>\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy\n} from \"@angular/core\";\nimport { AuthService } from \"../auth/auth.service\";\nimport { Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { TodolistService } from \"./todolist/todolist.service\";\n\n@Component({\n  selector: \"app-authenticated-header\",\n  templateUrl: \"./authenticated-header.component.html\",\n  styleUrls: [\"./authenticated-header.component.css\"]\n})\nexport class AuthenticatedHeaderComponent implements OnInit, OnDestroy {\n  @Input() expandedMenu: boolean;\n  @Output() toggleMenu = new EventEmitter<void>();\n\n  username$: Observable<string>;\n  numTodos$: Observable<number>;\n\n  constructor(\n    readonly authService: AuthService,\n    readonly todolistService: TodolistService\n  ) {}\n\n  ngOnInit() {\n    this.username$ = this.authService.state$.pipe(map(s => s.username));\n    this.numTodos$ = this.todolistService.state$.pipe(map(s => s.todos.length));\n    this.todolistService.addRequester(this);\n  }\n\n  ngOnDestroy() {\n    this.todolistService.removeRequester(this);\n  }\n\n  logout() {\n    this.authService.logout();\n  }\n}\n","<div class=\"expanded-menu\">\n  <div>\n    <button mat-icon-button aria-label=\"Todos\" (click)=\"goTo('/')\">\n      <mat-icon>dashboard</mat-icon> Todos\n    </button>\n  </div>\n  <div>\n    <button\n      mat-icon-button\n      aria-label=\"Learn more\"\n      (click)=\"goTo('/learn-more')\"\n    >\n      <mat-icon>help</mat-icon> Learn more\n    </button>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\n@Component({\n  selector: \"app-authenticated-menu\",\n  templateUrl: \"./authenticated-menu.component.html\",\n  styleUrls: [\"./authenticated-menu.component.css\"]\n})\nexport class AuthenticatedMenuComponent {\n  constructor(public router: Router) {}\n\n  goTo(pageLink: string) {\n    this.router.navigate([pageLink]);\n  }\n}\n","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { AuthGuardService } from \"../auth/auth-guard.service\";\r\nimport { AuthenticatedComponent } from \"./authenticated.component\";\r\nimport { TodolistComponent } from \"./todolist/todolist.component\";\r\nimport { LearnMoreComponent } from \"./learn-more/learn-more.component\";\r\nimport { NotFoundComponent } from \"./not-found/not-found.component\";\r\n\r\nconst authenticatedRoutes: Routes = [\r\n  {\r\n    path: \"\",\r\n    component: AuthenticatedComponent,\r\n    canActivate: [AuthGuardService],\r\n    children: [\r\n      {\r\n        path: \"\",\r\n        canActivateChild: [AuthGuardService],\r\n        children: [\r\n          {\r\n            path: \"\",\r\n            component: TodolistComponent\r\n          },\r\n          {\r\n            path: \"learn-more\",\r\n            component: LearnMoreComponent\r\n          },\r\n          {\r\n            path: \"**\",\r\n            component: NotFoundComponent\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(authenticatedRoutes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AuthenticatedRoutingModule {}\r\n","<app-authenticated-header\n  [expandedMenu]=\"expandedMenu\"\n  (toggleMenu)=\"toggleMenu()\"\n></app-authenticated-header>\n<mat-sidenav-container>\n  <mat-sidenav mode=\"side\" [opened]=\"expandedMenu\"\n    ><app-authenticated-menu></app-authenticated-menu\n  ></mat-sidenav>\n  <mat-sidenav-content><router-outlet></router-outlet></mat-sidenav-content>\n</mat-sidenav-container>\n","import { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"app-authenticated\",\n  templateUrl: \"./authenticated.component.html\",\n  styleUrls: [\"./authenticated.component.css\"]\n})\nexport class AuthenticatedComponent {\n  expandedMenu = false;\n\n  toggleMenu() {\n    this.expandedMenu = !this.expandedMenu;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { AuthenticatedComponent } from \"./authenticated.component\";\nimport { MatBadgeModule } from \"@angular/material/badge\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\nimport { AuthenticatedHeaderComponent } from \"./authenticated-header.component\";\nimport { AuthenticatedMenuComponent } from \"./authenticated-menu.component\";\nimport { LearnMoreModule } from \"./learn-more/learn-more.module\";\nimport { NotFoundModule } from \"./not-found/not-found.module\";\nimport { TodolistModule } from \"./todolist/todolist.module\";\nimport { AuthenticatedRoutingModule } from \"./authenticated-routing.module\";\n@NgModule({\n  declarations: [\n    AuthenticatedComponent,\n    AuthenticatedHeaderComponent,\n    AuthenticatedMenuComponent\n  ],\n  imports: [\n    CommonModule,\n    AuthenticatedRoutingModule,\n    MatBadgeModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    LearnMoreModule,\n    NotFoundModule,\n    TodolistModule\n  ]\n})\nexport class AuthenticatedModule {}\n","<p>learn-more works!</p>\n","import { Component, OnInit } from \"@angular/core\";\n\n@Component({\n  selector: \"app-learn-more\",\n  templateUrl: \"./learn-more.component.html\",\n  styleUrls: [\"./learn-more.component.css\"]\n})\nexport class LearnMoreComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit() {}\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { LearnMoreComponent } from \"./learn-more.component\";\n\n@NgModule({\n  declarations: [LearnMoreComponent],\n  imports: [CommonModule]\n})\nexport class LearnMoreModule {}\n","<p>not-found works!</p>\n","import { Component, OnInit } from \"@angular/core\";\n\n@Component({\n  selector: \"app-not-found\",\n  templateUrl: \"./not-found.component.html\",\n  styleUrls: [\"./not-found.component.css\"]\n})\nexport class NotFoundComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit() {}\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { NotFoundComponent } from \"./not-found.component\";\n\n@NgModule({\n  declarations: [NotFoundComponent],\n  imports: [CommonModule]\n})\nexport class NotFoundModule {}\n","<div *ngIf=\"todoState$ | async as todoState; else waitingForTodos\">\n  <div class=\"add-todo-area\">\n    <mat-form-field class=\"add-todo-field\">\n      <input\n        #taskNameBox\n        matInput\n        placeholder=\"Add a new todo\"\n        value=\"\"\n        [value]=\"taskName\"\n        (input)=\"taskName = taskNameBox.value\"\n        (keyup.enter)=\"addTodo()\"\n      />\n    </mat-form-field>\n    <mat-icon *ngIf=\"!todoState.ready\">refresh</mat-icon>\n    <button mat-button (click)=\"addTodo()\" [disabled]=\"taskName === ''\">\n      Add\n    </button>\n  </div>\n  <div>\n    <mat-card *ngFor=\"let todo of todoState.todos\">\n      <mat-checkbox\n        [checked]=\"todo.data.done\"\n        [disabled]=\"todo.state !== 'noop'\"\n        (click)=\"toggleTodo(todo.data.guid)\"\n      ></mat-checkbox>\n      <span\n        class=\"todo-label\"\n        [class.remove]=\"todo.state === 'remove'\"\n        [class.noaction]=\"todo.state !== 'noop'\"\n        >{{ todo.data.task }}</span\n      >\n      <mat-icon *ngIf=\"todo.state !== 'noop'\">refresh</mat-icon>\n      <button\n        mat-icon-button\n        aria-label=\"Delete todo\"\n        (click)=\"removeTodo(todo.data.guid)\"\n      >\n        <mat-icon>delete</mat-icon>\n      </button>\n    </mat-card>\n  </div>\n</div>\n<ng-template #waitingForTodos>Waiting for todos...</ng-template>\n","import { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { AuthService } from \"src/app/auth/auth.service\";\nimport { TodolistService, TodolistState } from \"./todolist.service\";\nimport { Observable } from \"rxjs\";\n\n@Component({\n  selector: \"app-todolist\",\n  templateUrl: \"./todolist.component.html\",\n  styleUrls: [\"./todolist.component.css\"]\n})\nexport class TodolistComponent implements OnInit, OnDestroy {\n  todoState$: Observable<TodolistState>;\n  taskName = \"\";\n\n  constructor(\n    readonly authService: AuthService,\n    readonly todolistService: TodolistService\n  ) {}\n\n  ngOnInit() {\n    this.todoState$ = this.todolistService.state$;\n    this.todolistService.addRequester(this);\n  }\n\n  ngOnDestroy() {\n    this.todolistService.removeRequester(this);\n  }\n\n  addTodo() {\n    this.todolistService.addTodo(this.taskName);\n    this.taskName = \"\";\n  }\n\n  toggleTodo(guid: string) {\n    this.todolistService.toggleTodo(guid);\n  }\n\n  removeTodo(guid: string) {\n    this.todolistService.removeTodo(guid);\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { TodolistComponent } from \"./todolist.component\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatCheckboxModule } from \"@angular/material/checkbox\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatInputModule } from \"@angular/material/input\";\n\n@NgModule({\n  declarations: [TodolistComponent],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatInputModule\n  ]\n})\nexport class TodolistModule {}\n","import { Injectable, Component, OnInit, OnDestroy } from \"@angular/core\";\nimport * as Api from \"../../../api\";\nimport { Subject, Observable, BehaviorSubject } from \"rxjs\";\nimport { AuthService } from \"src/app/auth/auth.service\";\n\nexport enum TodoSyncState {\n  Noop = \"noop\",\n  Add = \"add\",\n  Edit = \"edit\",\n  Remove = \"remove\"\n}\n\nexport type TodolistState = {\n  readonly ready: boolean;\n  readonly todos: ReadonlyArray<{\n    readonly data: Api.Todo;\n    readonly state: TodoSyncState;\n  }>;\n};\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class TodolistService {\n  private token = \"\";\n  private todos: TodolistState[\"todos\"];\n  private subject: Subject<TodolistState>;\n  readonly state$: Observable<TodolistState>;\n\n  private todoListenerHandle: Api.TodoListenerHandle | null;\n  private requesters = new Set<OnInit & OnDestroy>();\n\n  constructor(readonly authService: AuthService) {\n    this.todos = [];\n    this.subject = new BehaviorSubject({ ready: false, todos: this.todos });\n    this.state$ = this.subject.asObservable();\n    this.authService.state$.subscribe(s => {\n      this.token = s.token;\n      if (this.requesters.size !== 0) {\n        this.unregisterTodoListener();\n        this.registerTodoListener();\n      }\n    });\n  }\n\n  private updateTodos(todos: TodolistState[\"todos\"]) {\n    this.todos = todos;\n    this.subject.next({ ready: true, todos });\n  }\n\n  async addTodo(task: string) {\n    const todo: Api.Todo = {\n      guid: Math.random()\n        .toString(16)\n        .substr(2),\n      task,\n      done: false\n    };\n    this.updateTodos([...this.todos, { state: TodoSyncState.Add, data: todo }]);\n    const r = await Api.addTodo(this.token, todo);\n    if (r) {\n      this.updateTodos(\n        this.todos.map(t =>\n          t.data.guid === todo.guid\n            ? { state: TodoSyncState.Noop, data: todo }\n            : t\n        )\n      );\n    } else {\n      this.updateTodos(this.todos.filter(t => t.data.guid !== todo.guid));\n    }\n  }\n\n  async toggleTodo(guid: string) {\n    const todo = this.todos.find(\n      t => t.data.guid === guid && t.state === TodoSyncState.Noop\n    );\n    if (!todo) {\n      return;\n    }\n\n    const newData = { ...todo.data, done: !todo.data.done };\n    this.updateTodos([\n      ...this.todos.map(t =>\n        t.data.guid === guid\n          ? {\n              state: TodoSyncState.Edit,\n              data: newData\n            }\n          : t\n      )\n    ]);\n    const r = await Api.editTodo(this.token, newData);\n    if (r) {\n      this.updateTodos(\n        this.todos.map(t =>\n          t.data.guid === guid\n            ? {\n                state: TodoSyncState.Noop,\n                data: newData\n              }\n            : t\n        )\n      );\n    } else {\n      this.updateTodos(\n        this.todos.map(t =>\n          t.data.guid === guid\n            ? { state: TodoSyncState.Noop, data: todo.data }\n            : t\n        )\n      );\n    }\n  }\n\n  async removeTodo(guid: string) {\n    const todo = this.todos.find(\n      t => t.data.guid === guid && t.state === TodoSyncState.Noop\n    );\n    if (!todo) {\n      return;\n    }\n    this.updateTodos([\n      ...this.todos.map(t =>\n        t.data.guid === guid\n          ? {\n              state: TodoSyncState.Remove,\n              data: todo.data\n            }\n          : t\n      )\n    ]);\n    const r = await Api.removeTodo(this.token, todo.data);\n    if (r) {\n      this.updateTodos(this.todos.filter(t => t.data.guid !== guid));\n    } else {\n      this.updateTodos(\n        this.todos.map(t =>\n          t.data.guid === guid\n            ? { state: TodoSyncState.Noop, data: todo.data }\n            : t\n        )\n      );\n    }\n  }\n\n  private registerTodoListener() {\n    this.todoListenerHandle = Api.addTodoListener(\n      this.token,\n      todos => {\n        const todosBeingAdded: {\n          [guid: string]: Api.Todo;\n        } = this.todos\n          .filter(t => t.state === TodoSyncState.Add)\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\n        const todosBeingEdited: {\n          [guid: string]: Api.Todo;\n        } = this.todos\n          .filter(t => t.state === TodoSyncState.Edit)\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\n        const todosBeingRemoved: {\n          [guid: string]: Api.Todo;\n        } = this.todos\n          .filter(t => t.state === TodoSyncState.Remove)\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\n\n        const updatedTodos = todos\n          .filter(t => todosBeingAdded[t.guid] === undefined)\n          .map(t => {\n            // Remove, Edit and Noop\n            if (todosBeingEdited[t.guid]) {\n              return {\n                state: TodoSyncState.Edit,\n                data: todosBeingEdited[t.guid]\n              };\n            }\n            if (todosBeingRemoved[t.guid]) {\n              return {\n                state: TodoSyncState.Remove,\n                data: todosBeingRemoved[t.guid]\n              };\n            }\n            return { state: TodoSyncState.Noop, data: t };\n          })\n          .concat(this.todos.filter(t => t.state === TodoSyncState.Add)); // Add\n\n        this.updateTodos(updatedTodos);\n      },\n      () => {\n        this.authService.logout();\n      }\n    );\n  }\n\n  private unregisterTodoListener() {\n    Api.removeTodoListener(this.todoListenerHandle);\n    this.subject.next({ ready: false, todos: this.todos });\n  }\n\n  addRequester(requester: OnInit & OnDestroy) {\n    if (this.requesters.size === 0) {\n      this.registerTodoListener();\n    }\n    this.requesters.add(requester);\n  }\n\n  removeRequester(requester: OnInit & OnDestroy) {\n    if (!this.requesters.has(requester)) {\n      return;\n    }\n    this.requesters.delete(requester);\n    if (this.requesters.size === 0) {\n      this.unregisterTodoListener();\n    }\n  }\n}\n","<div id=\"content\">\n  <mat-card *ngIf=\"authStatus$ | async as authStatus\">\n    <img\n      mat-card-image\n      src=\"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg\"\n      alt=\"Eiffel Tower\"\n    />\n    <mat-card-header>\n      <mat-card-title>Welcome to TodoList Angular</mat-card-title>\n      <mat-card-subtitle>Try with password: “password”</mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <mat-form-field>\n        <input\n          #usernameBox\n          matInput\n          placeholder=\"Username\"\n          [value]=\"username\"\n          (input)=\"username = usernameBox.value\"\n          (keyup.enter)=\"login(authStatus)\"\n        />\n      </mat-form-field>\n      <mat-form-field>\n        <input\n          #passwordBox\n          matInput\n          placeholder=\"Password\"\n          [type]=\"hide ? 'password' : 'text'\"\n          [value]=\"password\"\n          (input)=\"password = passwordBox.value\"\n          (keyup.enter)=\"login(authStatus)\"\n        /><button\n          mat-icon-button\n          matSuffix\n          (click)=\"hide = !hide\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hide\"\n        >\n          <mat-icon>{{ hide ? \"visibility_off\" : \"visibility\" }}</mat-icon>\n        </button></mat-form-field\n      >\n    </mat-card-content>\n    <mat-card-actions>\n      <button\n        mat-button\n        [disabled]=\"!canLogin(authStatus)\"\n        (click)=\"login(authStatus)\"\n      >\n        {{ onGoingLogin(authStatus) ? \"...\" : \"Login\" }}\n      </button>\n    </mat-card-actions>\n  </mat-card>\n</div>\n","import { Component, OnInit, Input, OnDestroy } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Subscription, Observable } from \"rxjs\";\nimport { AuthService, AuthState, AuthStatus } from \"../auth/auth.service\";\nimport { map } from \"rxjs/operators\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"./login.component.html\",\n  styleUrls: [\"./login.component.css\"]\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  subscription: Subscription = new Subscription();\n  redirect?: string;\n\n  authStatus$: Observable<AuthStatus>;\n  username: string = \"\";\n  password: string = \"\";\n  hide: boolean = true;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit() {\n    this.authStatus$ = this.authService.state$.pipe(map(s => s.status));\n    this.subscription.add(\n      this.route.queryParams.subscribe(\n        params => (this.redirect = params[\"redirect\"])\n      )\n    );\n    this.subscription.add(\n      this.authService.state$.subscribe(s => {\n        if (s.status !== AuthStatus.Authenticated) {\n          return;\n        }\n        this.router.navigate([this.redirect || \"/\"]);\n      })\n    );\n  }\n\n  canLogin(authStatus: AuthStatus) {\n    return (\n      authStatus === AuthStatus.NonAuthenticated &&\n      this.username.length > 0 &&\n      this.password.length > 0\n    );\n  }\n\n  onGoingLogin(authStatus: AuthStatus) {\n    return authStatus === AuthStatus.OnGoingAuthentication;\n  }\n\n  login(authStatus: AuthStatus) {\n    if (!this.canLogin(authStatus)) {\n      return;\n    }\n    this.authService.login(this.username, this.password);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { LoginComponent } from \"./login.component\";\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatCardModule,\n    MatInputModule,\n    MatIconModule,\n    MatFormFieldModule\n  ]\n})\nexport class LoginModule {}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}
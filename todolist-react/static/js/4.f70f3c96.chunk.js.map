{"version":3,"sources":["context/TodoListContext.tsx","component/app/AppHeader.tsx","component/app/AppMenu.tsx","component/app/AppPage.tsx"],"names":["TodoState","defaultTodoList","TodoListContext","createContext","TodoListProvider","props","_useState","useState","_useState2","Object","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","ready","setReady","_useState3","_useState4","todos","setTodos","useEffect","handle","Api","newTodos","ts","todosBeingAdded","filter","t","state","Add","reduce","acc","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","data","guid","todosBeingEdited","Edit","todosBeingRemoved","Remove","undefined","map","Noop","concat","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","Provider","assign","value","addTodo","task","Math","random","toString","substr","todo","done","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","then","r","console","error","toggleTodo","prevTodo","find","Error","removeTodo","useTodoList","context","useContext","useStyles","makeStyles","theme","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButtonHidden","display","title","flexGrow","AppHeader","classes","_useAuthentification","useAuthentification","username","logout","_useTodoList","react_default","AppBar","position","className","clsx","drawerOpened","Toolbar","IconButton","edge","color","aria-label","onClick","toggleDrawer","Menu_default","Typography","variant","Badge","badgeContent","length","ShoppingCart_default","PowerSettingsNew_default","toolbarIcon","objectSpread","alignItems","justifyContent","padding","mixins","toolbar","drawerPaper","whiteSpace","drawerPaperClose","defineProperty","overflowX","spacing","breakpoints","up","withRouter","AppMenuTooltip","tooltipProps","Fragment","children","Tooltip","placement","Drawer","paper","open","ChevronLeft_default","Divider","List","ListItem","button","history","push","ListItemIcon","Dashboard_default","ListItemText","primary","Help_default","LearnMorePage","React","lazy","__webpack_require__","e","bind","ListPage","NotFoundPage","root","appBarSpacer","content","overflow","height","AppPage","slicedToArray","setDrawerOpened","CssBaseline","s","app_AppMenu","react_router","exact","path","component"],"mappings":"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","file":"static/js/4.f70f3c96.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport * as Api from '../api';\r\n\r\nexport enum TodoState {\r\n  Noop = 'noop',\r\n  Add = 'add',\r\n  Edit = 'edit',\r\n  Remove = 'remove'\r\n}\r\nexport type TodoType = {\r\n  data: Api.Todo;\r\n  state: TodoState;\r\n};\r\nexport type TodoListContextType = {\r\n  ready: boolean;\r\n  todos: TodoType[];\r\n  addTodo: (task: string) => void;\r\n  toggleTodo: (guid: string) => void;\r\n  removeTodo: (guid: string) => void;\r\n};\r\n\r\nconst defaultTodoList = {} as TodoListContextType;\r\nconst TodoListContext = createContext(defaultTodoList);\r\n\r\nexport function TodoListProvider<TProps>(props: TProps) {\r\n  const [ready, setReady] = useState(false);\r\n  const [todos, setTodos] = useState([] as TodoType[]);\r\n\r\n  useEffect(() => {\r\n    const listener = (newTodos: Api.Todo[]) => {\r\n      setReady(true);\r\n      setTodos(ts => {\r\n        const todosBeingAdded: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Add)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n        const todosBeingEdited: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Edit)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n        const todosBeingRemoved: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Remove)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n\r\n        return newTodos\r\n          .filter(t => todosBeingAdded[t.guid] === undefined)\r\n          .map(t => {\r\n            // Remove, Edit and Noop\r\n            if (todosBeingEdited[t.guid]) return { state: TodoState.Edit, data: todosBeingEdited[t.guid] };\r\n            if (todosBeingRemoved[t.guid]) return { state: TodoState.Remove, data: todosBeingRemoved[t.guid] };\r\n            return { state: TodoState.Noop, data: t };\r\n          })\r\n          .concat(ts.filter(t => t.state === TodoState.Add)); // Add\r\n      });\r\n    };\r\n    const handle = Api.addTodoListener(listener);\r\n    return () => Api.removeTodoListener(handle);\r\n  }, []);\r\n\r\n  const addTodo = (task: string) => {\r\n    const guid = Math.random()\r\n      .toString(16)\r\n      .substr(2);\r\n    const todo = { guid, task, done: false };\r\n\r\n    setTodos(ts => [...ts, { state: TodoState.Add, data: todo }]);\r\n    Api.addTodo(todo).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to add todo:', todo);\r\n        setTodos(ts => ts.filter(t => t.data.guid !== guid));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Noop, data: todo } : t)));\r\n      }\r\n    });\r\n  };\r\n\r\n  const toggleTodo = (guid: string) => {\r\n    const prevTodo = todos.find(t => t.data.guid === guid && t.state === TodoState.Noop);\r\n    if (!prevTodo) throw new Error(`No todo available for modification given guid ${guid}`);\r\n\r\n    const todo = { ...prevTodo.data, done: !prevTodo.data.done };\r\n\r\n    setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Edit, data: todo } : t)));\r\n    Api.editTodo(todo).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to edit todo:', todo);\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? prevTodo : t)));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Noop, data: todo } : t)));\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeTodo = (guid: string) => {\r\n    const prevTodo = todos.find(t => t.data.guid === guid && t.state === TodoState.Noop);\r\n    if (!prevTodo) throw new Error(`No todo available for modification given guid ${guid}`);\r\n\r\n    setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Remove, data: prevTodo.data } : t)));\r\n    Api.removeTodo(prevTodo.data).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to remove todo:', prevTodo.data);\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? prevTodo : t)));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.filter(t => t.data.guid !== guid));\r\n      }\r\n    });\r\n  };\r\n\r\n  return <TodoListContext.Provider value={{ ready, todos, addTodo, toggleTodo, removeTodo }} {...props} />;\r\n}\r\n\r\nexport function useTodoList() {\r\n  const context = useContext(TodoListContext);\r\n  if (context === defaultTodoList) {\r\n    throw new Error(`useTodoList must be used within a TodoListProvider`);\r\n  }\r\n  return context;\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useAuthentification } from '../../context/AuthentificationContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { useTodoList, TodoState } from '../../context/TodoListContext';\r\nimport Badge from '@material-ui/core/Badge';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    })\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    })\r\n  },\r\n\r\n  menuButtonHidden: {\r\n    display: 'none'\r\n  },\r\n  title: {\r\n    flexGrow: 1\r\n  }\r\n}));\r\n\r\ntype Props = { drawerOpened: boolean; toggleDrawer: () => void };\r\n\r\nexport default function AppHeader(props: Props) {\r\n  const classes = useStyles();\r\n  const { username, logout } = useAuthentification();\r\n  const { ready, todos } = useTodoList();\r\n\r\n  return (\r\n    <AppBar position=\"absolute\" className={clsx(classes.appBar, props.drawerOpened && classes.appBarShift)}>\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"Toggle drawer\"\r\n          onClick={() => props.toggleDrawer()}\r\n          className={clsx(props.drawerOpened && classes.menuButtonHidden)}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          Welcome {username}\r\n        </Typography>\r\n        <IconButton>\r\n          <Badge\r\n            badgeContent={ready ? `${todos.filter(t => t.state !== TodoState.Remove).length}` : '?'}\r\n            color=\"primary\"\r\n          >\r\n            <ShoppingCartIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={() => {\r\n            logout();\r\n          }}\r\n        >\r\n          <PowerSettingsNewIcon />\r\n        </IconButton>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React, { ReactElement } from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbarIcon: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n    ...theme.mixins.toolbar\r\n  },\r\n  drawerPaper: {\r\n    position: 'relative',\r\n    whiteSpace: 'nowrap',\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    })\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: 'hidden',\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9)\r\n    }\r\n  }\r\n}));\r\n\r\ntype Props = { drawerOpened: boolean; toggleDrawer: () => void } & RouteComponentProps;\r\n\r\nfunction AppMenu(props: Props) {\r\n  const classes = useStyles();\r\n  const AppMenuTooltip = (tooltipProps: { title: string; children: ReactElement }) => {\r\n    if (props.drawerOpened) {\r\n      return <>{tooltipProps.children}</>;\r\n    }\r\n    return (\r\n      <Tooltip title={tooltipProps.title} placement=\"right\">\r\n        {tooltipProps.children}\r\n      </Tooltip>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      variant=\"permanent\"\r\n      classes={{\r\n        paper: clsx(classes.drawerPaper, !props.drawerOpened && classes.drawerPaperClose)\r\n      }}\r\n      open={props.drawerOpened}\r\n    >\r\n      <div className={classes.toolbarIcon}>\r\n        <IconButton onClick={() => props.toggleDrawer()}>\r\n          <ChevronLeftIcon />\r\n        </IconButton>\r\n      </div>\r\n      <Divider />\r\n      <List>\r\n        <AppMenuTooltip title=\"Todos\">\r\n          <ListItem button onClick={() => props.history.push('/')}>\r\n            <ListItemIcon>\r\n              <DashboardIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Todos\" />\r\n          </ListItem>\r\n        </AppMenuTooltip>\r\n        <AppMenuTooltip title=\"Learn more\">\r\n          <ListItem button onClick={() => props.history.push('/learn-more')}>\r\n            <ListItemIcon>\r\n              <HelpIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Learn more\" />\r\n          </ListItem>\r\n        </AppMenuTooltip>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default withRouter(AppMenu);\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppHeader from './AppHeader';\r\nimport { TodoListProvider } from '../../context/TodoListContext';\r\nimport AppMenu from './AppMenu';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nconst LearnMorePage = React.lazy(() => import('../learn-more/LearnMorePage'));\r\nconst ListPage = React.lazy(() => import('../list/ListPage'));\r\nconst NotFoundPage = React.lazy(() => import('../not-found/NotFoundPage'));\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex'\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    overflow: 'auto',\r\n    height: '100vh',\r\n    padding: '2em'\r\n  }\r\n}));\r\n\r\ntype Props = {};\r\n\r\nexport default function AppPage(props: Props) {\r\n  const classes = useStyles();\r\n  const [drawerOpened, setDrawerOpened] = useState(false);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TodoListProvider>\r\n        <CssBaseline />\r\n        <AppHeader drawerOpened={drawerOpened} toggleDrawer={() => setDrawerOpened(s => !s)} />\r\n        <AppMenu drawerOpened={drawerOpened} toggleDrawer={() => setDrawerOpened(s => !s)} />\r\n        <main className={classes.content}>\r\n          <div className={classes.appBarSpacer}></div>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={ListPage} />\r\n            <Route exact path=\"/learn-more\" component={LearnMorePage} />\r\n            <Route component={NotFoundPage} />\r\n          </Switch>\r\n        </main>\r\n      </TodoListProvider>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}
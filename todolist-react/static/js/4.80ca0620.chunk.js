(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{134:function(t,e,a){"use strict";a.r(e);var n,o=a(0),r=a.n(o),i=a(107),u=a(14),d=a(130),c=a(131),l=a(111),f=a(123),s=a.n(f),m=a(128),g=a(129),v=a(27),b=a(48),p=a(118),E=a(120),h=a(20);!function(t){t.Noop="noop",t.Add="add",t.Edit="edit",t.Remove="remove"}(n||(n={}));var j={},O=Object(o.createContext)(j);function w(t){var e=Object(o.useState)(!1),a=Object(v.a)(e,2),i=a[0],u=a[1],d=Object(o.useState)([]),c=Object(v.a)(d,2),l=c[0],f=c[1];Object(o.useEffect)(function(){var t=h.b(function(t){u(!0),f(function(e){var a=e.filter(function(t){return t.state===n.Add}).reduce(function(t,e){return Object(E.a)({},t,Object(p.a)({},e.data.guid,e.data))},{}),o=e.filter(function(t){return t.state===n.Edit}).reduce(function(t,e){return Object(E.a)({},t,Object(p.a)({},e.data.guid,e.data))},{}),r=e.filter(function(t){return t.state===n.Remove}).reduce(function(t,e){return Object(E.a)({},t,Object(p.a)({},e.data.guid,e.data))},{});return t.filter(function(t){return void 0===a[t.guid]}).map(function(t){return o[t.guid]?{state:n.Edit,data:o[t.guid]}:r[t.guid]?{state:n.Remove,data:r[t.guid]}:{state:n.Noop,data:t}}).concat(e.filter(function(t){return t.state===n.Add}))})});return function(){return h.i(t)}},[]);return r.a.createElement(O.Provider,Object.assign({value:{ready:i,todos:l,addTodo:function(t){var e=Math.random().toString(16).substr(2),a={guid:e,task:t,done:!1};f(function(t){return[].concat(Object(b.a)(t),[{state:n.Add,data:a}])}),h.a(a).then(function(t){t?f(function(t){return t.map(function(t){return t.data.guid===e?{state:n.Noop,data:a}:t})}):(console.error("Failed to add todo:",a),f(function(t){return t.filter(function(t){return t.data.guid!==e})}))})},toggleTodo:function(t){var e=l.find(function(e){return e.data.guid===t&&e.state===n.Noop});if(!e)throw new Error("No todo available for modification given guid ".concat(t));var a=Object(E.a)({},e.data,{done:!e.data.done});f(function(e){return e.map(function(e){return e.data.guid===t?{state:n.Edit,data:a}:e})}),h.e(a).then(function(o){o?f(function(e){return e.map(function(e){return e.data.guid===t?{state:n.Noop,data:a}:e})}):(console.error("Failed to edit todo:",a),f(function(a){return a.map(function(a){return a.data.guid===t?e:a})}))})},removeTodo:function(t){var e=l.find(function(e){return e.data.guid===t&&e.state===n.Noop});if(!e)throw new Error("No todo available for modification given guid ".concat(t));f(function(a){return a.map(function(a){return a.data.guid===t?{state:n.Remove,data:e.data}:a})}),h.h(e.data).then(function(a){a?f(function(e){return e.filter(function(e){return e.data.guid!==t})}):(console.error("Failed to remove todo:",e.data),f(function(a){return a.map(function(a){return a.data.guid===t?e:a})}))})}}},t))}var N=a(114),k=a(133),y=a(105),T=a(121),x=a.n(T),C=a(69),A=Object(i.a)(function(t){return{paper:{padding:t.spacing(2),margin:"auto"}}});function R(t){var e=A(),a=t.todo.state!==n.Noop;return r.a.createElement(C.a,{className:e.paper},r.a.createElement(k.a,{disabled:a,checked:t.todo.data.done,onChange:function(){return t.toggle()},inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement("span",{style:{textDecoration:t.todo.state===n.Remove?"line-through":"none",color:a?"grey":"black"}},t.todo.data.task),r.a.createElement(y.a,{style:{margin:"1em",visibility:t.todo.state===n.Noop?"hidden":"visible"},size:12}),r.a.createElement(m.a,{style:{float:"right"},"aria-label":"delete",disabled:a,onClick:function(){return t.remove()}},r.a.createElement(x.a,null)))}var P=a(113);function S(t){var e=function(){var t=Object(o.useContext)(O);if(t===j)throw new Error("useTodoList must be used within a TodoListProvider");return t}(),a=e.ready,n=e.todos,i=e.addTodo,u=e.toggleTodo,d=e.removeTodo,c=Object(o.useState)(""),l=Object(v.a)(c,2),f=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(N.a,{label:"Add a new todo",value:f,onChange:function(t){return s(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&""!==f&&(i(f),s(""),t.preventDefault())}}),r.a.createElement(P.a,{disabled:""===f,onClick:function(){i(f),s("")}},"Add")),a?r.a.createElement("div",null,n.map(function(t){return r.a.createElement(R,{key:t.data.guid,todo:t,toggle:function(){return u(t.data.guid)},remove:function(){return d(t.data.guid)}})})):r.a.createElement(y.a,null))}a.d(e,"default",function(){return G});var F=Object(i.a)(function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto",padding:"2em"}}});function G(t){var e=F(),a=Object(u.c)(),n=a.username,o=a.logout;return r.a.createElement("div",{className:e.root},r.a.createElement(g.a,null),r.a.createElement(d.a,{position:"static"},r.a.createElement(c.a,null,r.a.createElement(l.a,{variant:"h6",className:e.title},"Welcome ",n),r.a.createElement(m.a,{onClick:function(){o()}},r.a.createElement(s.a,null)))),r.a.createElement("main",{className:e.content},r.a.createElement(w,null,r.a.createElement(S,null))))}}}]);
//# sourceMappingURL=4.80ca0620.chunk.js.map
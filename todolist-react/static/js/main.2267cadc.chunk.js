(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),u=n.n(c),i=n(42),o=n(34),s=n(18),l=n(147);function f(e){switch(Object(s.c)().state){case s.b.OnGoingAuthentication:case s.b.NonAuthenticated:return a.a.createElement(o.a,{to:{pathname:"/login",search:"?redirect=".concat(encodeURIComponent(e.location.pathname))}});case s.b.Authenticated:return a.a.createElement(r.Suspense,{fallback:a.a.createElement(l.a,null)},e.children)}}function d(e){var t=Object(o.g)(f);return function(n){return a.a.createElement(t,null,a.a.createElement(e,n))}}var m=n(43),b=n(35),h=n(70),v=n(154),p=n(155),g=n(148),w=n(153),O=n(150),k=n(112),j=n(149),E=Object(h.a)({cardContainer:{padding:20,textAlign:"center"},card:{display:"inline-block",maxWidth:345},hint:{fontSize:12},media:{height:140}});var x=Object(o.g)(function(e){var t=E(),n=Object(s.c)(),c=n.state,u=n.login,i=Object(r.useState)(""),f=Object(b.a)(i,2),d=f[0],m=f[1],h=Object(r.useState)(""),x=Object(b.a)(h,2),A=x[0],_=x[1],N=c===s.b.NonAuthenticated&&d&&A,P=c===s.b.OnGoingAuthentication;if(c===s.b.Authenticated){var S=new URLSearchParams(e.location.search).get("redirect")||"/";return a.a.createElement(o.a,{to:S})}return a.a.createElement("div",{className:t.cardContainer},a.a.createElement(g.a,{className:t.card},a.a.createElement(j.a,{className:t.media,image:"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg",title:"Eiffel Tower"}),a.a.createElement(O.a,null,a.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Welcome to TodoList React"),a.a.createElement(k.a,{className:t.hint,color:"textSecondary",gutterBottom:!0},"Try with password: \u201cpassword\u201d"),a.a.createElement(p.a,{label:"Username",value:d,onChange:function(e){return m(e.currentTarget.value)},onKeyPress:function(e){13===e.which&&N&&(u(d,A),e.preventDefault())}}),a.a.createElement("br",null),a.a.createElement(p.a,{label:"Password",type:"password",value:A,onChange:function(e){return _(e.currentTarget.value)},onKeyPress:function(e){13===e.which&&N&&(u(d,A),e.preventDefault())}})),a.a.createElement(w.a,null,a.a.createElement(v.a,{color:"primary",disabled:!N,onClick:function(){return u(d,A)}},"Login"),P?a.a.createElement(l.a,{size:24}):a.a.createElement(a.a.Fragment,null))))}),A=function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,198))},_=a.a.lazy(A),N=function(){return Object(r.useEffect)(function(){A()},[]),a.a.createElement("div",{className:"App"},a.a.createElement(m.a,{maxNotifications:3},a.a.createElement(s.a,null,a.a.createElement(i.a,null,a.a.createElement(o.d,null,a.a.createElement(o.b,{exact:!0,path:"/login",component:x}),a.a.createElement(o.b,{component:d(_)}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return h});var r,a=n(20),c=n.n(a),u=n(37),i=n(35),o=n(0),s=n.n(o),l=n(26),f=n(43);!function(e){e.NonAuthenticated="NonAuthenticated",e.OnGoingAuthentication="OnGoingAuthentication",e.Authenticated="Authenticated"}(r||(r={}));var d={},m=Object(o.createContext)(d);function b(e){var t=Object(f.b)(),n=t.success,a=t.error,d=Object(o.useState)(function(){return l.g("AuthenticationProvider","username")}),b=Object(i.a)(d,2),h=b[0],v=b[1],p=Object(o.useState)(function(){return l.g("AuthenticationProvider","token")}),g=Object(i.a)(p,2),w=g[0],O=g[1],k=Object(o.useState)(r.OnGoingAuthentication),j=Object(i.a)(k,2),E=j[0],x=j[1];Object(o.useEffect)(function(){var e=function(){var e=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=""!==w,!e.t0){e.next=5;break}return e.next=4,l.c(w);case 4:e.t0=e.sent;case 5:e.t0?(l.j("AuthenticationProvider","username",h),l.j("AuthenticationProvider","token",w),x(r.Authenticated)):x(r.NonAuthenticated);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();E!==r.Authenticated&&e()},[h,w,E]),Object(o.useEffect)(function(){E===r.Authenticated&&n("Login successful")},[E,n]);var A=function(){var e=Object(u.a)(c.a.mark(function e(t,n){var u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E===r.NonAuthenticated){e.next=3;break}return console.error("Unable to login, current state is ".concat(E," for user ").concat(h)),e.abrupt("return");case 3:return v(t),x(r.OnGoingAuthentication),e.prev=5,e.next=8,l.f(t,n);case 8:u=e.sent,O(u.token),x(r.Authenticated),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),x(r.NonAuthenticated),a("Login failure");case 17:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t,n){return e.apply(this,arguments)}}();return s.a.createElement(m.Provider,Object.assign({value:{username:h,token:w,state:E,login:A,logout:function(e){O(""),x(r.NonAuthenticated),l.d("AuthenticationProvider","username"),l.d("AuthenticationProvider","token"),e||n("Logout successful")}}},e))}function h(){var e=Object(o.useContext)(m);if(e===d)throw new Error("useAuthentication must be used within a AuthenticationProvider");return e}},26:function(e,t,n){"use strict";n.d(t,"f",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"j",function(){return f}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return b}),n.d(t,"i",function(){return h}),n.d(t,"a",function(){return v}),n.d(t,"e",function(){return p}),n.d(t,"h",function(){return g});var r=n(20),a=n.n(r),c=n(75),u=n(37),i=function(){var e=window.validToken||"w\u20aclc0Me";return window.validToken=e,e},o=function(e,t){return"password"!==t?k(500):O({username:e,token:i()},500)},s=function(e){return e!==i()?O(!1,500):O(!0,500)},l=function(e,t){return localStorage.getItem("".concat(e,"::").concat(t))||""},f=function(e,t,n){return localStorage.setItem("".concat(e,"::").concat(t),n)},d=function(e,t){return localStorage.removeItem("".concat(e,"::").concat(t))},m=function(){var e=l("Todos","data");return e?JSON.parse(e):[]},b=function(e,t,n){var r={_i:{}},a=function a(){if(e!==i())return r._i._handleId=void 0,void n();var c=m();(function(e){if(void 0===r._i._data)return!0;if(r._i._data.length!==e.length)return!0;return!!r._i._data.some(function(t,n){return r=t,a=e[n],!(r.guid===a.guid&&r.task===a.task&&r.done===a.done);var r,a})})(c)&&(r._i._data=c,t(c)),r._i._handleId=setTimeout(function(){return a()},500)};return r._i._handleId=setTimeout(function(){return a()},500),r},h=function(e){e._i._handleId&&clearTimeout(e._i._handleId)},v=function(){var e=Object(u.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(500);case 2:if(t===i()){e.next=4;break}return e.abrupt("return",!1);case 4:if(!(r=m()).some(function(e){return e.guid===n.guid})){e.next=7;break}return e.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify([].concat(Object(c.a)(r),[n]))),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(500);case 2:if(t===i()){e.next=4;break}return e.abrupt("return",!1);case 4:if((r=m()).some(function(e){return e.guid===n.guid})){e.next=7;break}return e.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify(r.map(function(e){return e.guid===n.guid?n:e}))),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(500);case 2:if(t===i()){e.next=4;break}return e.abrupt("return",!1);case 4:if((r=m()).some(function(e){return e.guid===n.guid})){e.next=7;break}return e.abrupt("return",!1);case 7:return f("Todos","data",JSON.stringify(r.filter(function(e){return e.guid!==n.guid}))),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return new Promise(function(t,n){setTimeout(function(){return t()},e)})},O=function(e,t){return new Promise(function(n,r){setTimeout(function(){return n(e)},t)})},k=function(e){return new Promise(function(t,n){setTimeout(function(){return n()},e)})}},43:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(0),a=n.n(r),c=n(57),u={},i=Object(r.createContext)(u);function o(e){var t=e.enqueueSnackbar,n=Object(r.useCallback)(function(e){return t(e,{variant:"default"})},[t]),c=Object(r.useCallback)(function(e){return t(e,{variant:"success"})},[t]),u=Object(r.useCallback)(function(e){return t(e,{variant:"info"})},[t]),o=Object(r.useCallback)(function(e){return t(e,{variant:"warning"})},[t]),s=Object(r.useCallback)(function(e){return t(e,{variant:"error"})},[t]);return a.a.createElement(i.Provider,Object.assign({value:{log:n,success:c,info:u,warning:o,error:s}},e))}function s(e){var t=Object(c.withSnackbar)(o);return a.a.createElement(c.SnackbarProvider,{maxSnack:e.maxNotifications},a.a.createElement(t,null,e.children))}function l(){var e=Object(r.useContext)(i);if(e===u)throw new Error("useNotification must be used within a NotificationProvider");return e}},87:function(e,t,n){e.exports=n(109)}},[[87,1,2]]]);
//# sourceMappingURL=main.2267cadc.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),c=n.n(i),u=n(42),o=n(34),s=n(18),f=n(147);function l(e){switch(Object(s.c)().state){case s.b.OnGoingAuthentification:case s.b.NonAuthentificated:return a.a.createElement(o.a,{to:{pathname:"/login",search:"?redirect=".concat(encodeURIComponent(e.location.pathname))}});case s.b.Authentificated:return a.a.createElement(r.Suspense,{fallback:a.a.createElement(f.a,null)},e.children)}}function d(e){var t=Object(o.g)(l);return function(n){return a.a.createElement(t,null,a.a.createElement(e,n))}}var m=n(43),h=n(35),b=n(70),v=n(154),p=n(155),g=n(148),w=n(153),O=n(150),j=n(112),E=n(149),k=Object(b.a)({cardContainer:{padding:20,textAlign:"center"},card:{display:"inline-block",maxWidth:345},hint:{fontSize:12},media:{height:140}});var A=Object(o.g)(function(e){var t=k(),n=Object(s.c)(),i=n.state,c=n.login,u=Object(r.useState)(""),l=Object(h.a)(u,2),d=l[0],m=l[1],b=Object(r.useState)(""),A=Object(h.a)(b,2),x=A[0],_=A[1],N=i===s.b.NonAuthentificated&&d&&x,P=i===s.b.OnGoingAuthentification;if(i===s.b.Authentificated){var S=new URLSearchParams(e.location.search).get("redirect")||"/";return a.a.createElement(o.a,{to:S})}return a.a.createElement("div",{className:t.cardContainer},a.a.createElement(g.a,{className:t.card},a.a.createElement(E.a,{className:t.media,image:"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg",title:"Eiffel Tower"}),a.a.createElement(O.a,null,a.a.createElement(j.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Welcome to TodoList React"),a.a.createElement(j.a,{className:t.hint,color:"textSecondary",gutterBottom:!0},"Try with password: \u201cpassword\u201d"),a.a.createElement(p.a,{label:"Username",value:d,onChange:function(e){return m(e.currentTarget.value)},onKeyPress:function(e){13===e.which&&N&&(c(d,x),e.preventDefault())}}),a.a.createElement("br",null),a.a.createElement(p.a,{label:"Password",type:"password",value:x,onChange:function(e){return _(e.currentTarget.value)},onKeyPress:function(e){13===e.which&&N&&(c(d,x),e.preventDefault())}})),a.a.createElement(w.a,null,a.a.createElement(v.a,{color:"primary",disabled:!N,onClick:function(){return c(d,x)}},"Login"),P?a.a.createElement(f.a,{size:24}):a.a.createElement(a.a.Fragment,null))))}),x=function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,198))},_=a.a.lazy(x),N=function(){return Object(r.useEffect)(function(){x()},[]),a.a.createElement("div",{className:"App"},a.a.createElement(m.a,{maxNotifications:3},a.a.createElement(s.a,null,a.a.createElement(u.a,null,a.a.createElement(o.d,null,a.a.createElement(o.b,{exact:!0,path:"/login",component:A}),a.a.createElement(o.b,{component:d(_)}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return b});var r,a=n(20),i=n.n(a),c=n(37),u=n(35),o=n(0),s=n.n(o),f=n(26),l=n(43);!function(e){e.NonAuthentificated="NonAuthentificated",e.OnGoingAuthentification="OnGoingAuthentification",e.Authentificated="Authentificated"}(r||(r={}));var d={},m=Object(o.createContext)(d);function h(e){var t=Object(l.b)(),n=t.success,a=t.error,d=Object(o.useState)(function(){return f.g("AuthentificationProvider","username")}),h=Object(u.a)(d,2),b=h[0],v=h[1],p=Object(o.useState)(function(){return f.g("AuthentificationProvider","token")}),g=Object(u.a)(p,2),w=g[0],O=g[1],j=Object(o.useState)(r.OnGoingAuthentification),E=Object(u.a)(j,2),k=E[0],A=E[1];Object(o.useEffect)(function(){var e=function(){var e=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=""!==w,!e.t0){e.next=5;break}return e.next=4,f.c(w);case 4:e.t0=e.sent;case 5:e.t0?(f.j("AuthentificationProvider","username",b),f.j("AuthentificationProvider","token",w),A(r.Authentificated)):A(r.NonAuthentificated);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();k!==r.Authentificated&&e()},[b,w,k]),Object(o.useEffect)(function(){k===r.Authentificated&&n("Login successful")},[k,n]);var x=function(){var e=Object(c.a)(i.a.mark(function e(t,n){var c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k===r.NonAuthentificated){e.next=3;break}return console.error("Unable to login, current state is ".concat(k," for user ").concat(b)),e.abrupt("return");case 3:return v(t),A(r.OnGoingAuthentification),e.prev=5,e.next=8,f.f(t,n);case 8:c=e.sent,O(c.token),A(r.Authentificated),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),A(r.NonAuthentificated),a("Login failure");case 17:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t,n){return e.apply(this,arguments)}}();return s.a.createElement(m.Provider,Object.assign({value:{username:b,token:w,state:k,login:x,logout:function(){O(""),A(r.NonAuthentificated),f.d("AuthentificationProvider","username"),f.d("AuthentificationProvider","token"),n("Logout successful")}}},e))}function b(){var e=Object(o.useContext)(m);if(e===d)throw new Error("useAuthentification must be used within a AuthentificationProvider");return e}},26:function(e,t,n){"use strict";n.d(t,"f",function(){return u}),n.d(t,"c",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"j",function(){return f}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return m}),n.d(t,"i",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return p});var r=n(20),a=n.n(r),i=n(75),c=n(37),u=function(e,t){return"password"!==t?O(500):w({username:e,token:"w\u20aclc0Me"},500)},o=function(e){return w("w\u20aclc0Me"===e,500)},s=function(e,t){return localStorage.getItem("".concat(e,"::").concat(t))||""},f=function(e,t,n){return localStorage.setItem("".concat(e,"::").concat(t),n)},l=function(e,t){return localStorage.removeItem("".concat(e,"::").concat(t))},d=function(){var e=s("Todos","data");return e?JSON.parse(e):[]},m=function(e){var t={_i:{}},n=function n(){var r=d();(function(e){if(void 0===t._i._data)return!0;if(t._i._data.length!==e.length)return!0;return!!t._i._data.some(function(t,n){return r=t,a=e[n],!(r.guid===a.guid&&r.task===a.task&&r.done===a.done);var r,a})})(r)&&(t._i._data=r,e(r)),t._i._handleId=setTimeout(function(){return n()},500)};return t._i._handleId=setTimeout(function(){return n()},500),t},h=function(e){e._i._handleId&&clearTimeout(e._i._handleId)},b=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(500);case 2:if(!(n=d()).some(function(e){return e.guid===t.guid})){e.next=5;break}return e.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify([].concat(Object(i.a)(n),[t]))),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(500);case 2:if((n=d()).some(function(e){return e.guid===t.guid})){e.next=5;break}return e.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify(n.map(function(e){return e.guid===t.guid?t:e}))),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(500);case 2:if((n=d()).some(function(e){return e.guid===t.guid})){e.next=5;break}return e.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify(n.filter(function(e){return e.guid!==t.guid}))),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(e){return new Promise(function(t,n){setTimeout(function(){return t()},e)})},w=function(e,t){return new Promise(function(n,r){setTimeout(function(){return n(e)},t)})},O=function(e){return new Promise(function(t,n){setTimeout(function(){return n()},e)})}},43:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return f});var r=n(0),a=n.n(r),i=n(57),c={},u=Object(r.createContext)(c);function o(e){var t=e.enqueueSnackbar,n=Object(r.useCallback)(function(e){return t(e,{variant:"default"})},[t]),i=Object(r.useCallback)(function(e){return t(e,{variant:"success"})},[t]),c=Object(r.useCallback)(function(e){return t(e,{variant:"info"})},[t]),o=Object(r.useCallback)(function(e){return t(e,{variant:"warning"})},[t]),s=Object(r.useCallback)(function(e){return t(e,{variant:"error"})},[t]);return a.a.createElement(u.Provider,Object.assign({value:{log:n,success:i,info:c,warning:o,error:s}},e))}function s(e){var t=Object(i.withSnackbar)(o);return a.a.createElement(i.SnackbarProvider,{maxSnack:e.maxNotifications},a.a.createElement(t,null,e.children))}function f(){var e=Object(r.useContext)(u);if(e===c)throw new Error("useNotification must be used within a NotificationProvider");return e}},87:function(e,t,n){e.exports=n(109)}},[[87,1,2]]]);
//# sourceMappingURL=main.3134eb7b.chunk.js.map
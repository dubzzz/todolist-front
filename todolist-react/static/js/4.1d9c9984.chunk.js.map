{"version":3,"sources":["context/TodoListContext.tsx","component/authentificated/AuthentificatedHeader.tsx","component/authentificated/AuthentificatedMenu.tsx","hook/WindowDimension.tsx","component/authentificated/AuthentificatedApp.tsx"],"names":["TodoState","defaultTodoList","TodoListContext","createContext","TodoListProvider","props","_useState","useState","_useState2","Object","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","ready","setReady","_useState3","_useState4","todos","setTodos","useEffect","handle","Api","newTodos","ts","todosBeingAdded","filter","t","state","Add","reduce","acc","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","data","guid","todosBeingEdited","Edit","todosBeingRemoved","Remove","undefined","map","Noop","concat","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","Provider","assign","value","addTodo","task","Math","random","toString","substr","todo","done","_home_travis_build_dubzzz_todolist_front_todolist_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","then","r","console","error","toggleTodo","prevTodo","find","Error","removeTodo","useTodoList","context","useContext","useStyles","makeStyles","theme","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButtonHidden","display","title","flexGrow","AuthentificatedHeader","classes","_useAuthentification","useAuthentification","username","logout","_useTodoList","react_default","AppBar","position","className","clsx","drawerOpened","Toolbar","IconButton","edge","color","aria-label","onClick","toggleDrawer","Menu_default","Typography","variant","Badge","badgeContent","length","ShoppingCart_default","PowerSettingsNew_default","drawerWidth","toolbarIcon","objectSpread","alignItems","justifyContent","padding","mixins","toolbar","drawerPaper","whiteSpace","drawerPaperClose","defineProperty","overflowX","spacing","breakpoints","up","drawerSmallScreenSpacer","drawerSmallScreen","withRouter","AppMenuTooltip","tooltipProps","Fragment","children","Tooltip","placement","smallScreen","measure","window","innerWidth","height","innerHeight","slicedToArray","dimension","setDimension","onResize","addEventListener","removeEventListener","useWindowDimension","Drawer","paper","open","ChevronLeft_default","Divider","List","ListItem","button","history","push","ListItemIcon","Dashboard_default","ListItemText","primary","Help_default","LearnMorePage","React","lazy","__webpack_require__","e","bind","ListPage","NotFoundPage","root","appBarSpacer","content","overflow","AuthentificatedApp","setDrawerOpened","CssBaseline","s","authentificated_AuthentificatedMenu","react_router","exact","path","component"],"mappings":"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","file":"static/js/4.1d9c9984.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport * as Api from '../api';\r\n\r\nexport enum TodoState {\r\n  Noop = 'noop',\r\n  Add = 'add',\r\n  Edit = 'edit',\r\n  Remove = 'remove'\r\n}\r\nexport type TodoType = {\r\n  data: Api.Todo;\r\n  state: TodoState;\r\n};\r\nexport type TodoListContextType = {\r\n  ready: boolean;\r\n  todos: TodoType[];\r\n  addTodo: (task: string) => void;\r\n  toggleTodo: (guid: string) => void;\r\n  removeTodo: (guid: string) => void;\r\n};\r\n\r\nconst defaultTodoList = {} as TodoListContextType;\r\nconst TodoListContext = createContext(defaultTodoList);\r\n\r\nexport function TodoListProvider<TProps>(props: TProps) {\r\n  const [ready, setReady] = useState(false);\r\n  const [todos, setTodos] = useState([] as TodoType[]);\r\n\r\n  useEffect(() => {\r\n    const listener = (newTodos: Api.Todo[]) => {\r\n      setReady(true);\r\n      setTodos(ts => {\r\n        const todosBeingAdded: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Add)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n        const todosBeingEdited: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Edit)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n        const todosBeingRemoved: { [guid: string]: Api.Todo } = ts\r\n          .filter(t => t.state === TodoState.Remove)\r\n          .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n\r\n        return newTodos\r\n          .filter(t => todosBeingAdded[t.guid] === undefined)\r\n          .map(t => {\r\n            // Remove, Edit and Noop\r\n            if (todosBeingEdited[t.guid]) return { state: TodoState.Edit, data: todosBeingEdited[t.guid] };\r\n            if (todosBeingRemoved[t.guid]) return { state: TodoState.Remove, data: todosBeingRemoved[t.guid] };\r\n            return { state: TodoState.Noop, data: t };\r\n          })\r\n          .concat(ts.filter(t => t.state === TodoState.Add)); // Add\r\n      });\r\n    };\r\n    const handle = Api.addTodoListener(listener);\r\n    return () => Api.removeTodoListener(handle);\r\n  }, []);\r\n\r\n  const addTodo = (task: string) => {\r\n    const guid = Math.random()\r\n      .toString(16)\r\n      .substr(2);\r\n    const todo = { guid, task, done: false };\r\n\r\n    setTodos(ts => [...ts, { state: TodoState.Add, data: todo }]);\r\n    Api.addTodo(todo).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to add todo:', todo);\r\n        setTodos(ts => ts.filter(t => t.data.guid !== guid));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Noop, data: todo } : t)));\r\n      }\r\n    });\r\n  };\r\n\r\n  const toggleTodo = (guid: string) => {\r\n    const prevTodo = todos.find(t => t.data.guid === guid && t.state === TodoState.Noop);\r\n    if (!prevTodo) throw new Error(`No todo available for modification given guid ${guid}`);\r\n\r\n    const todo = { ...prevTodo.data, done: !prevTodo.data.done };\r\n\r\n    setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Edit, data: todo } : t)));\r\n    Api.editTodo(todo).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to edit todo:', todo);\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? prevTodo : t)));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Noop, data: todo } : t)));\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeTodo = (guid: string) => {\r\n    const prevTodo = todos.find(t => t.data.guid === guid && t.state === TodoState.Noop);\r\n    if (!prevTodo) throw new Error(`No todo available for modification given guid ${guid}`);\r\n\r\n    setTodos(ts => ts.map(t => (t.data.guid === guid ? { state: TodoState.Remove, data: prevTodo.data } : t)));\r\n    Api.removeTodo(prevTodo.data).then(r => {\r\n      if (!r) {\r\n        console.error('Failed to remove todo:', prevTodo.data);\r\n        setTodos(ts => ts.map(t => (t.data.guid === guid ? prevTodo : t)));\r\n      } else {\r\n        // We apply the modification\r\n        setTodos(ts => ts.filter(t => t.data.guid !== guid));\r\n      }\r\n    });\r\n  };\r\n\r\n  return <TodoListContext.Provider value={{ ready, todos, addTodo, toggleTodo, removeTodo }} {...props} />;\r\n}\r\n\r\nexport function useTodoList() {\r\n  const context = useContext(TodoListContext);\r\n  if (context === defaultTodoList) {\r\n    throw new Error(`useTodoList must be used within a TodoListProvider`);\r\n  }\r\n  return context;\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useAuthentification } from '../../context/AuthentificationContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { useTodoList, TodoState } from '../../context/TodoListContext';\r\nimport Badge from '@material-ui/core/Badge';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    })\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    })\r\n  },\r\n\r\n  menuButtonHidden: {\r\n    display: 'none'\r\n  },\r\n  title: {\r\n    flexGrow: 1\r\n  }\r\n}));\r\n\r\ntype Props = { drawerOpened: boolean; toggleDrawer: () => void };\r\n\r\nexport default function AuthentificatedHeader(props: Props) {\r\n  const classes = useStyles();\r\n  const { username, logout } = useAuthentification();\r\n  const { ready, todos } = useTodoList();\r\n\r\n  return (\r\n    <AppBar position=\"absolute\" className={clsx(classes.appBar, props.drawerOpened && classes.appBarShift)}>\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"Toggle drawer\"\r\n          onClick={() => props.toggleDrawer()}\r\n          className={clsx(props.drawerOpened && classes.menuButtonHidden)}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          Welcome {username}\r\n        </Typography>\r\n        <IconButton>\r\n          <Badge\r\n            badgeContent={ready ? `${todos.filter(t => t.state !== TodoState.Remove).length}` : '?'}\r\n            color=\"primary\"\r\n          >\r\n            <ShoppingCartIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={() => {\r\n            logout();\r\n          }}\r\n        >\r\n          <PowerSettingsNewIcon />\r\n        </IconButton>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React, { ReactElement } from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\r\nimport { useWindowDimension } from '../../hook/WindowDimension';\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbarIcon: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n    ...theme.mixins.toolbar\r\n  },\r\n  drawerPaper: {\r\n    position: 'relative',\r\n    whiteSpace: 'nowrap',\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen\r\n    })\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: 'hidden',\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9)\r\n    }\r\n  },\r\n  drawerSmallScreenSpacer: {\r\n    width: theme.spacing(7)\r\n  },\r\n  drawerSmallScreen: {\r\n    position: 'absolute'\r\n  }\r\n}));\r\n\r\ntype Props = { drawerOpened: boolean; toggleDrawer: () => void } & RouteComponentProps;\r\n\r\nfunction AuthentificatedMenu(props: Props) {\r\n  const classes = useStyles();\r\n  const { width } = useWindowDimension();\r\n\r\n  const AppMenuTooltip = (tooltipProps: { title: string; children: ReactElement }) => {\r\n    if (props.drawerOpened) {\r\n      return <>{tooltipProps.children}</>;\r\n    }\r\n    return (\r\n      <Tooltip title={tooltipProps.title} placement=\"right\">\r\n        {tooltipProps.children}\r\n      </Tooltip>\r\n    );\r\n  };\r\n\r\n  const smallScreen = width < 2 * drawerWidth;\r\n\r\n  return (\r\n    <>\r\n      {smallScreen && <div className={classes.drawerSmallScreenSpacer}></div>}\r\n      <Drawer\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: clsx(\r\n            classes.drawerPaper,\r\n            !props.drawerOpened && classes.drawerPaperClose,\r\n            smallScreen && classes.drawerSmallScreen\r\n          )\r\n        }}\r\n        open={props.drawerOpened}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <IconButton onClick={() => props.toggleDrawer()}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          <AppMenuTooltip title=\"Todos\">\r\n            <ListItem button onClick={() => props.history.push('/')}>\r\n              <ListItemIcon>\r\n                <DashboardIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Todos\" />\r\n            </ListItem>\r\n          </AppMenuTooltip>\r\n          <AppMenuTooltip title=\"Learn more\">\r\n            <ListItem button onClick={() => props.history.push('/learn-more')}>\r\n              <ListItemIcon>\r\n                <HelpIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Learn more\" />\r\n            </ListItem>\r\n          </AppMenuTooltip>\r\n        </List>\r\n      </Drawer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withRouter(AuthentificatedMenu);\r\n","import { useState, useEffect } from 'react';\r\n\r\nexport function useWindowDimension() {\r\n  const measure = () => ({ width: window.innerWidth, height: window.innerHeight });\r\n  const [dimension, setDimension] = useState(() => measure());\r\n\r\n  useEffect(() => {\r\n    const onResize = () => {\r\n      setDimension(measure());\r\n    };\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n  return dimension;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AuthentificatedHeader from './AuthentificatedHeader';\r\nimport { TodoListProvider } from '../../context/TodoListContext';\r\nimport AppMenu from './AuthentificatedMenu';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nconst LearnMorePage = React.lazy(() => import('./learn-more/LearnMorePage'));\r\nconst ListPage = React.lazy(() => import('./list/ListPage'));\r\nconst NotFoundPage = React.lazy(() => import('./not-found/NotFoundPage'));\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex'\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    overflow: 'auto',\r\n    height: '100vh',\r\n    padding: '2em'\r\n  }\r\n}));\r\n\r\ntype Props = {};\r\n\r\nexport default function AuthentificatedApp(props: Props) {\r\n  const classes = useStyles();\r\n  const [drawerOpened, setDrawerOpened] = useState(false);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TodoListProvider>\r\n        <CssBaseline />\r\n        <AuthentificatedHeader drawerOpened={drawerOpened} toggleDrawer={() => setDrawerOpened(s => !s)} />\r\n        <AppMenu drawerOpened={drawerOpened} toggleDrawer={() => setDrawerOpened(s => !s)} />\r\n        <main className={classes.content}>\r\n          <div className={classes.appBarSpacer}></div>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={ListPage} />\r\n            <Route exact path=\"/learn-more\" component={LearnMorePage} />\r\n            <Route component={NotFoundPage} />\r\n          </Switch>\r\n        </main>\r\n      </TodoListProvider>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}
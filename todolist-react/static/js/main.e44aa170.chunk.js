(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return m}),n.d(e,"c",function(){return h});var r,a=n(16),i=n.n(a),c=n(29),u=n(27),o=n(0),s=n.n(o),f=n(20);!function(t){t.NonAuthentificated="NonAuthentificated",t.OnGoingAuthentification="OnGoingAuthentification",t.Authentificated="Authentificated"}(r||(r={}));var l={},d=Object(o.createContext)(l);function m(t){var e=Object(o.useState)(function(){return f.g("AuthentificationProvider","username")}),n=Object(u.a)(e,2),a=n[0],l=n[1],m=Object(o.useState)(function(){return f.g("AuthentificationProvider","token")}),h=Object(u.a)(m,2),p=h[0],b=h[1],g=Object(o.useState)(r.OnGoingAuthentification),v=Object(u.a)(g,2),w=v[0],O=v[1];Object(o.useEffect)(function(){var t=function(){var t=Object(c.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=""!==p,!t.t0){t.next=5;break}return t.next=4,f.c(p);case 4:t.t0=t.sent;case 5:t.t0?(f.j("AuthentificationProvider","username",a),f.j("AuthentificationProvider","token",p),O(r.Authentificated)):O(r.NonAuthentificated);case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();w!==r.Authentificated&&t()},[a,p,w]);var E=function(){var t=Object(c.a)(i.a.mark(function t(e,n){var c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w===r.NonAuthentificated){t.next=3;break}return console.error("Unable to login, current state is ".concat(w," for user ").concat(a)),t.abrupt("return");case 3:return l(e),O(r.OnGoingAuthentification),t.prev=5,t.next=8,f.f(e,n);case 8:c=t.sent,b(c.token),O(r.Authentificated),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),O(r.NonAuthentificated);case 16:case"end":return t.stop()}},t,null,[[5,13]])}));return function(e,n){return t.apply(this,arguments)}}();return s.a.createElement(d.Provider,Object.assign({value:{username:a,token:p,state:w,login:E,logout:function(){b(""),O(r.NonAuthentificated),f.d("AuthentificationProvider","username"),f.d("AuthentificationProvider","token")}}},t))}function h(){var t=Object(o.useContext)(d);if(t===l)throw new Error("useAuthentification must be used within a AuthentificationProvider");return t}},20:function(t,e,n){"use strict";n.d(e,"f",function(){return u}),n.d(e,"c",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"j",function(){return f}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return m}),n.d(e,"i",function(){return h}),n.d(e,"a",function(){return p}),n.d(e,"e",function(){return b}),n.d(e,"h",function(){return g});var r=n(16),a=n.n(r),i=n(48),c=n(29),u=function(t,e){return"password"!==e?O(500):w({username:t,token:"w\u20aclc0Me"},500)},o=function(t){return w("w\u20aclc0Me"===t,500)},s=function(t,e){return localStorage.getItem("".concat(t,"::").concat(e))||""},f=function(t,e,n){return localStorage.setItem("".concat(t,"::").concat(e),n)},l=function(t,e){return localStorage.removeItem("".concat(t,"::").concat(e))},d=function(){var t=s("Todos","data");return t?JSON.parse(t):[]},m=function(t){var e={_i:{}},n=function n(){var r=d();(function(t){if(void 0===e._i._data)return!0;if(e._i._data.length!==t.length)return!0;return!!e._i._data.some(function(e,n){return r=e,a=t[n],!(r.guid===a.guid&&r.task===a.task&&r.done===a.done);var r,a})})(r)&&(e._i._data=r,t(r)),e._i._handleId=setTimeout(function(){return n()},500)};return e._i._handleId=setTimeout(function(){return n()},500),e},h=function(t){t._i._handleId&&clearTimeout(t._i._handleId)},p=function(){var t=Object(c.a)(a.a.mark(function t(e){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(500);case 2:if(!(n=d()).some(function(t){return t.guid===e.guid})){t.next=5;break}return t.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify([].concat(Object(i.a)(n),[e]))),t.abrupt("return",!0);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(c.a)(a.a.mark(function t(e){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(500);case 2:if((n=d()).some(function(t){return t.guid===e.guid})){t.next=5;break}return t.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify(n.map(function(t){return t.guid===e.guid?e:t}))),t.abrupt("return",!0);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(c.a)(a.a.mark(function t(e){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(500);case 2:if((n=d()).some(function(t){return t.guid===e.guid})){t.next=5;break}return t.abrupt("return",!1);case 5:return f("Todos","data",JSON.stringify(n.filter(function(t){return t.guid!==e.guid}))),t.abrupt("return",!0);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),v=function(t){return new Promise(function(e,n){setTimeout(function(){return e()},t)})},w=function(t,e){return new Promise(function(n,r){setTimeout(function(){return n(t)},e)})},O=function(t){return new Promise(function(e,n){setTimeout(function(){return n()},t)})}},58:function(t,e,n){t.exports=n(68)},68:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(8),c=n.n(i),u=n(35),o=n(25),s=n(14),f=n(105);function l(t){switch(Object(s.c)().state){case s.b.OnGoingAuthentification:case s.b.NonAuthentificated:return a.a.createElement(o.a,{to:{pathname:"/login",search:"?redirect=".concat(encodeURIComponent(t.location.pathname))}});case s.b.Authentificated:return a.a.createElement(r.Suspense,{fallback:a.a.createElement(f.a,null)},t.children)}}function d(t){var e=Object(o.g)(l);return function(n){return a.a.createElement(e,null,a.a.createElement(t,n))}}var m=n(27),h=n(107),p=n(113),b=n(114),g=n(108),v=n(112),w=n(110),O=n(111),E=n(109),A=Object(h.a)({cardContainer:{padding:20,textAlign:"center"},card:{display:"inline-block",maxWidth:345},hint:{fontSize:12},media:{height:140}});var j=Object(o.g)(function(t){var e=A(),n=Object(s.c)(),i=n.state,c=n.login,u=Object(r.useState)(""),l=Object(m.a)(u,2),d=l[0],h=l[1],j=Object(r.useState)(""),k=Object(m.a)(j,2),_=k[0],x=k[1],y=i===s.b.NonAuthentificated&&d&&_,N=i===s.b.OnGoingAuthentification;if(i===s.b.Authentificated){var P=new URLSearchParams(t.location.search).get("redirect")||"/";return a.a.createElement(o.a,{to:P})}return a.a.createElement("div",{className:e.cardContainer},a.a.createElement(g.a,{className:e.card},a.a.createElement(E.a,{className:e.media,image:"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg",title:"Eiffel Tower"}),a.a.createElement(w.a,null,a.a.createElement(O.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Welcome to TodoList React"),a.a.createElement(O.a,{className:e.hint,color:"textSecondary",gutterBottom:!0},"Try with password: \u201cpassword\u201d"),a.a.createElement(b.a,{label:"Username",value:d,onChange:function(t){return h(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&y&&(c(d,_),t.preventDefault())}}),a.a.createElement("br",null),a.a.createElement(b.a,{label:"Password",type:"password",value:_,onChange:function(t){return x(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&y&&(c(d,_),t.preventDefault())}})),a.a.createElement(v.a,null,a.a.createElement(p.a,{color:"primary",disabled:!y,onClick:function(){return c(d,_)}},"Login"),N?a.a.createElement(f.a,{size:24}):a.a.createElement(a.a.Fragment,null))))}),k=a.a.lazy(function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,134))}),_=a.a.lazy(function(){return n.e(5).then(n.bind(null,132))}),x=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(s.a,null,a.a.createElement(u.a,null,a.a.createElement(o.d,null,a.a.createElement(o.b,{exact:!0,path:"/",component:d(k)}),a.a.createElement(o.b,{exact:!0,path:"/login",component:j}),a.a.createElement(o.b,{component:d(_)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[58,1,2]]]);
//# sourceMappingURL=main.e44aa170.chunk.js.map
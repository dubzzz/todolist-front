(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{137:function(t,e,a){"use strict";a.r(e);var n,o=a(0),r=a.n(o),i=a(27),u=a(48),c=a(119),d=a(120),l=a(20);!function(t){t.Noop="noop",t.Add="add",t.Edit="edit",t.Remove="remove"}(n||(n={}));var f={},s=Object(o.createContext)(f);function m(t){var e=Object(o.useState)(!1),a=Object(i.a)(e,2),f=a[0],m=a[1],g=Object(o.useState)([]),v=Object(i.a)(g,2),b=v[0],p=v[1];Object(o.useEffect)(function(){var t=l.b(function(t){m(!0),p(function(e){var a=e.filter(function(t){return t.state===n.Add}).reduce(function(t,e){return Object(d.a)({},t,Object(c.a)({},e.data.guid,e.data))},{}),o=e.filter(function(t){return t.state===n.Edit}).reduce(function(t,e){return Object(d.a)({},t,Object(c.a)({},e.data.guid,e.data))},{}),r=e.filter(function(t){return t.state===n.Remove}).reduce(function(t,e){return Object(d.a)({},t,Object(c.a)({},e.data.guid,e.data))},{});return t.filter(function(t){return void 0===a[t.guid]}).map(function(t){return o[t.guid]?{state:n.Edit,data:o[t.guid]}:r[t.guid]?{state:n.Remove,data:r[t.guid]}:{state:n.Noop,data:t}}).concat(e.filter(function(t){return t.state===n.Add}))})});return function(){return l.i(t)}},[]);return r.a.createElement(s.Provider,Object.assign({value:{ready:f,todos:b,addTodo:function(t){var e=Math.random().toString(16).substr(2),a={guid:e,task:t,done:!1};p(function(t){return[].concat(Object(u.a)(t),[{state:n.Add,data:a}])}),l.a(a).then(function(t){t?p(function(t){return t.map(function(t){return t.data.guid===e?{state:n.Noop,data:a}:t})}):(console.error("Failed to add todo:",a),p(function(t){return t.filter(function(t){return t.data.guid!==e})}))})},toggleTodo:function(t){var e=b.find(function(e){return e.data.guid===t&&e.state===n.Noop});if(!e)throw new Error("No todo available for modification given guid ".concat(t));var a=Object(d.a)({},e.data,{done:!e.data.done});p(function(e){return e.map(function(e){return e.data.guid===t?{state:n.Edit,data:a}:e})}),l.e(a).then(function(o){o?p(function(e){return e.map(function(e){return e.data.guid===t?{state:n.Noop,data:a}:e})}):(console.error("Failed to edit todo:",a),p(function(a){return a.map(function(a){return a.data.guid===t?e:a})}))})},removeTodo:function(t){var e=b.find(function(e){return e.data.guid===t&&e.state===n.Noop});if(!e)throw new Error("No todo available for modification given guid ".concat(t));p(function(a){return a.map(function(a){return a.data.guid===t?{state:n.Remove,data:e.data}:a})}),l.h(e.data).then(function(a){a?p(function(e){return e.filter(function(e){return e.data.guid!==t})}):(console.error("Failed to remove todo:",e.data),p(function(a){return a.map(function(a){return a.data.guid===t?e:a})}))})}}},t))}function g(){var t=Object(o.useContext)(s);if(t===f)throw new Error("useTodoList must be used within a TodoListProvider");return t}var v=a(114),b=a(136),p=a(105),E=a(130),h=a(121),j=a.n(h),O=a(107),w=a(69),N=Object(O.a)(function(t){return{paper:{padding:t.spacing(2),margin:"auto"}}});function y(t){var e=N(),a=t.todo.state!==n.Noop;return r.a.createElement(w.a,{className:e.paper},r.a.createElement(b.a,{disabled:a,checked:t.todo.data.done,onChange:function(){return t.toggle()},inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement("span",{style:{textDecoration:t.todo.state===n.Remove?"line-through":"none",color:a?"grey":"black"}},t.todo.data.task),r.a.createElement(p.a,{style:{margin:"1em",visibility:t.todo.state===n.Noop?"hidden":"visible"},size:12}),r.a.createElement(E.a,{style:{float:"right"},"aria-label":"delete",disabled:a,onClick:function(){return t.remove()}},r.a.createElement(j.a,null)))}var k=a(113);function T(t){var e=g(),a=e.ready,n=e.todos,u=e.addTodo,c=e.toggleTodo,d=e.removeTodo,l=Object(o.useState)(""),f=Object(i.a)(l,2),s=f[0],m=f[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{label:"Add a new todo",value:s,onChange:function(t){return m(t.currentTarget.value)},onKeyPress:function(t){13===t.which&&""!==s&&(u(s),m(""),t.preventDefault())}}),r.a.createElement(k.a,{disabled:""===s,onClick:function(){u(s),m("")}},"Add")),a?r.a.createElement("div",null,n.map(function(t){return r.a.createElement(y,{key:t.data.guid,todo:t,toggle:function(){return c(t.data.guid)},remove:function(){return d(t.data.guid)}})})):r.a.createElement(p.a,null))}var C=a(14),x=a(132),A=a(133),R=a(111),P=a(123),S=a.n(P),F=a(124),G=a.n(F),D=a(131),J=a(134),L=Object(O.a)(function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto",padding:"2em"}}});function z(t){var e=L(),a=Object(C.c)(),n=a.username,o=a.logout,i=g(),u=i.ready,c=i.todos;return r.a.createElement("div",{className:e.root},r.a.createElement(D.a,null),r.a.createElement(x.a,{position:"static"},r.a.createElement(A.a,null,r.a.createElement(R.a,{variant:"h6",className:e.title},"Welcome ",n),r.a.createElement(E.a,null,r.a.createElement(J.a,{badgeContent:u?"".concat(c.length):"?",color:"primary"},r.a.createElement(S.a,null))),r.a.createElement(E.a,{onClick:function(){o()}},r.a.createElement(G.a,null)))),r.a.createElement("main",{className:e.content},t.children))}function B(t){return r.a.createElement(m,null,r.a.createElement(z,null,r.a.createElement(T,null)))}a.d(e,"default",function(){return B})}}]);
//# sourceMappingURL=4.2eb08d23.chunk.js.map
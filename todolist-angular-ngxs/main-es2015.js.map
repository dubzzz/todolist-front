{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/api/index.ts","./src/app/app-routing.module.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/auth/auth-guard.service.ts","./src/app/authenticated/authenticated-header/authenticated-header.component.html","./src/app/authenticated/authenticated-header/authenticated-header.component.ts","./src/app/authenticated/authenticated-menu/authenticated-menu.component.html","./src/app/authenticated/authenticated-menu/authenticated-menu.component.ts","./src/app/authenticated/authenticated-routing.module.ts","./src/app/authenticated/authenticated.module.ts","./src/app/authenticated/authenticated/authenticated.component.html","./src/app/authenticated/authenticated/authenticated.component.ts","./src/app/authenticated/learn-more/learn-more.module.ts","./src/app/authenticated/learn-more/learn-more/learn-more.component.html","./src/app/authenticated/learn-more/learn-more/learn-more.component.ts","./src/app/authenticated/not-found/not-found.module.ts","./src/app/authenticated/not-found/not-found/not-found.component.html","./src/app/authenticated/not-found/not-found/not-found.component.ts","./src/app/authenticated/todolist/todolist-list-item/todolist-list-item.component.html","./src/app/authenticated/todolist/todolist-list-item/todolist-list-item.component.ts","./src/app/authenticated/todolist/todolist-list/todolist-list.component.html","./src/app/authenticated/todolist/todolist-list/todolist-list.component.ts","./src/app/authenticated/todolist/todolist-new-item/todolist-new-item.component.html","./src/app/authenticated/todolist/todolist-new-item/todolist-new-item.component.ts","./src/app/authenticated/todolist/todolist.module.ts","./src/app/authenticated/todolist/todolist.service.ts","./src/app/authenticated/todolist/todolist/todolist.component.html","./src/app/authenticated/todolist/todolist/todolist.component.ts","./src/app/login/login.module.ts","./src/app/login/login/login.component.html","./src/app/login/login/login.component.ts","./src/environments/environment.ts","./src/main.ts","./src/state/authentication/authentication.actions.ts","./src/state/authentication/authentication.model.ts","./src/state/authentication/authentication.state.ts","./src/state/todolist/todolist.actions.ts","./src/state/todolist/todolist.model.ts","./src/state/todolist/todolist.state.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","/* Helpers */\r\n\r\nconst delay = (ms: number): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => resolve(), ms);\r\n  });\r\n};\r\n\r\nconst success = <T>(out: T, ms: number): Promise<T> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => resolve(out), ms);\r\n  });\r\n};\r\n\r\nconst failure = <T>(ms: number): Promise<T> => {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => reject(), ms);\r\n  });\r\n};\r\n\r\n/* Login API */\r\n\r\ninterface LoginSuccess {\r\n  username: string;\r\n  token: string;\r\n}\r\nconst validPassword = 'password';\r\n\r\nconst getValidToken = () => {\r\n  const token = (window as any).validToken || 'w€lc0Me';\r\n  (window as any).validToken = token;\r\n  return token;\r\n};\r\n\r\nexport const login = (\r\n  username: string,\r\n  password: string\r\n): Promise<LoginSuccess> => {\r\n  if (password !== validPassword) {\r\n    return failure(500);\r\n  }\r\n  return success({ username, token: getValidToken() }, 500);\r\n};\r\n\r\nexport const checkToken = (token: string): Promise<boolean> => {\r\n  if (token !== getValidToken()) {\r\n    return success(false, 500);\r\n  }\r\n  return success(true, 500);\r\n};\r\n\r\n/* Storage API */\r\n\r\nexport const readStorage = (space: string, keyName: string) => {\r\n  return localStorage.getItem(`${space}::${keyName}`) || '';\r\n};\r\n\r\nexport const writeStorage = (space: string, keyName: string, value: string) => {\r\n  return localStorage.setItem(`${space}::${keyName}`, value);\r\n};\r\n\r\nexport const clearStorage = (space: string, keyName: string) => {\r\n  return localStorage.removeItem(`${space}::${keyName}`);\r\n};\r\n\r\n/* Todolist */\r\n\r\nexport interface Todo {\r\n  guid: string;\r\n  task: string;\r\n  done: boolean;\r\n}\r\nexport interface TodoListenerHandle {\r\n  _i: {\r\n    _handleId?: ReturnType<typeof setTimeout>;\r\n    _data?: Todo[];\r\n  };\r\n}\r\n\r\nconst readTodos = (): Todo[] => {\r\n  const raw = readStorage('Todos', 'data');\r\n  if (!raw) {\r\n    return [];\r\n  }\r\n  return JSON.parse(raw);\r\n};\r\n\r\nexport const addTodoListener = (\r\n  token: string,\r\n  fn: (todos: Todo[]) => void,\r\n  connectionLost: () => void\r\n): TodoListenerHandle => {\r\n  const handle: TodoListenerHandle = { _i: {} };\r\n\r\n  const changeDetected = (newData: Todo[]) => {\r\n    if (handle._i._data === undefined) {\r\n      return true;\r\n    }\r\n    if (handle._i._data.length !== newData.length) {\r\n      return true;\r\n    }\r\n\r\n    const sameTodo = (t1: Todo, t2: Todo) =>\r\n      t1.guid === t2.guid && t1.task === t2.task && t1.done === t2.done;\r\n    if (handle._i._data.some((p, idx) => !sameTodo(p, newData[idx]))) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  const detectChanges = () => {\r\n    if (token !== getValidToken()) {\r\n      handle._i._handleId = undefined;\r\n      connectionLost();\r\n      return;\r\n    }\r\n    const newData = readTodos();\r\n    if (changeDetected(newData)) {\r\n      handle._i._data = newData;\r\n      fn(newData);\r\n    }\r\n    handle._i._handleId = setTimeout(() => detectChanges(), 500);\r\n  };\r\n\r\n  handle._i._handleId = setTimeout(() => detectChanges(), 500);\r\n  return handle;\r\n};\r\n\r\nexport const removeTodoListener = (handle: TodoListenerHandle): void => {\r\n  if (handle._i._handleId) {\r\n    clearTimeout(handle._i._handleId);\r\n  }\r\n};\r\n\r\nexport const addTodo = async (token: string, todo: Todo): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) {\r\n    return false;\r\n  }\r\n\r\n  const data = readTodos();\r\n  if (data.some(t => t.guid === todo.guid)) {\r\n    return false;\r\n  }\r\n\r\n  writeStorage('Todos', 'data', JSON.stringify([...data, todo]));\r\n  return true;\r\n};\r\n\r\nexport const editTodo = async (token: string, todo: Todo): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) {\r\n    return false;\r\n  }\r\n\r\n  const data = readTodos();\r\n  if (!data.some(t => t.guid === todo.guid)) {\r\n    return false;\r\n  }\r\n\r\n  writeStorage(\r\n    'Todos',\r\n    'data',\r\n    JSON.stringify(data.map(t => (t.guid === todo.guid ? todo : t)))\r\n  );\r\n  return true;\r\n};\r\n\r\nexport const removeTodo = async (\r\n  token: string,\r\n  todo: Todo\r\n): Promise<boolean> => {\r\n  await delay(500);\r\n  if (token !== getValidToken()) {\r\n    return false;\r\n  }\r\n\r\n  const data = readTodos();\r\n  if (!data.some(t => t.guid === todo.guid)) {\r\n    return false;\r\n  }\r\n\r\n  writeStorage(\r\n    'Todos',\r\n    'data',\r\n    JSON.stringify(data.filter(t => t.guid !== todo.guid))\r\n  );\r\n  return true;\r\n};\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AuthGuardService } from './auth/auth-guard.service';\nimport { LoginComponent } from './login/login/login.component';\n\nconst routes: Routes = [\n  {\n    path: 'login',\n    component: LoginComponent\n  },\n  {\n    path: '',\n    loadChildren: () =>\n      import('./authenticated/authenticated.module').then(\n        mod => mod.AuthenticatedModule\n      ),\n    canActivate: [AuthGuardService],\n    data: { preload: true }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","<router-outlet></router-outlet>\n","import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngxs/store';\nimport { TryLoginByToken } from 'src/state/authentication/authentication.actions';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  constructor(readonly store: Store) {}\n\n  ngOnInit() {\n    this.store.dispatch(TryLoginByToken);\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { NgxsModule } from '@ngxs/store';\nimport { NgxsReduxDevtoolsPluginModule } from '@ngxs/devtools-plugin';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { LoginModule } from './login/login.module';\nimport { AuthenticatedModule } from './authenticated/authenticated.module';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\nimport { TodolistState } from 'src/state/todolist/todolist.state';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    NgxsModule.forRoot([AuthenticationState, TodolistState]),\n    NgxsReduxDevtoolsPluginModule.forRoot(),\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    LoginModule,\n    AuthenticatedModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot,\n  CanActivateChild,\n  Router\n} from '@angular/router';\nimport { map } from 'rxjs/operators';\nimport { Select } from '@ngxs/store';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuardService implements CanActivate, CanActivateChild {\n  @Select(AuthenticationState.isAuthenticated)\n  isAuthenticated$: Observable<boolean>;\n\n  constructor(readonly router: Router) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.isAuthenticated$.pipe(\n      map(isAuth => {\n        if (!isAuth) {\n          this.router.navigate(['/login'], {\n            queryParams: {\n              redirect: state.url\n            }\n          });\n          return false;\n        }\n        return true;\n      })\n    );\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.canActivate(route, state);\n  }\n}\n","<mat-toolbar color=\"primary\" role=\"header\">\n  <button mat-icon-button aria-label=\"Toggle menu\" (click)=\"toggleMenu.emit()\">\n    <mat-icon>menu</mat-icon>\n  </button>\n  <span>Welcome {{ username$ | async }}</span>\n  <span class=\"spacer\"></span>\n  <button mat-icon-button aria-label=\"To-dos\">\n    <mat-icon [matBadge]=\"numTodosString$ | async\" matBadgeColor=\"warn\"\n      >shopping_cart</mat-icon\n    >\n  </button>\n  <button mat-icon-button aria-label=\"Logout\" (click)=\"logout()\">\n    <mat-icon>power_settings_new</mat-icon>\n  </button>\n</mat-toolbar>\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { TodolistService } from '../todolist/todolist.service';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\nimport { Select, Store } from '@ngxs/store';\nimport { TryLogout } from 'src/state/authentication/authentication.actions';\nimport { TodolistState } from 'src/state/todolist/todolist.state';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-authenticated-header',\n  templateUrl: './authenticated-header.component.html',\n  styleUrls: ['./authenticated-header.component.css']\n})\nexport class AuthenticatedHeaderComponent implements OnInit, OnDestroy {\n  @Input() expandedMenu: boolean;\n  @Output() toggleMenu = new EventEmitter<void>();\n\n  @Select(AuthenticationState.username)\n  username$: Observable<string>;\n\n  @Select(TodolistState.numTodos)\n  numTodos$: Observable<number>;\n  numTodosString$: Observable<string>;\n\n  constructor(\n    readonly store: Store,\n    readonly todolistService: TodolistService\n  ) {\n    this.numTodosString$ = this.numTodos$.pipe(map(n => String(n)));\n  }\n\n  ngOnInit() {\n    this.todolistService.addRequester(this);\n  }\n\n  ngOnDestroy() {\n    this.todolistService.removeRequester(this);\n  }\n\n  logout() {\n    this.store.dispatch(TryLogout);\n  }\n}\n","<div class=\"expanded-menu\">\n  <div>\n    <button mat-icon-button aria-label=\"Todos\" (click)=\"goTo('/')\">\n      <mat-icon>dashboard</mat-icon> Todos\n    </button>\n  </div>\n  <div>\n    <button\n      mat-icon-button\n      aria-label=\"Learn more\"\n      (click)=\"goTo('/learn-more')\"\n    >\n      <mat-icon>help</mat-icon> Learn more\n    </button>\n  </div>\n</div>\n","import { Component, Output, EventEmitter } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-authenticated-menu',\n  templateUrl: './authenticated-menu.component.html',\n  styleUrls: ['./authenticated-menu.component.css']\n})\nexport class AuthenticatedMenuComponent {\n  @Output() toggleMenu = new EventEmitter<void>();\n\n  constructor(readonly router: Router) {}\n\n  goTo(pageLink: string) {\n    this.toggleMenu.emit();\n    this.router.navigate([pageLink]);\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuardService } from '../auth/auth-guard.service';\r\nimport { AuthenticatedComponent } from './authenticated/authenticated.component';\r\nimport { TodolistComponent } from './todolist/todolist/todolist.component';\r\nimport { LearnMoreComponent } from './learn-more/learn-more/learn-more.component';\r\nimport { NotFoundComponent } from './not-found/not-found/not-found.component';\r\n\r\nconst authenticatedRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AuthenticatedComponent,\r\n    canActivate: [AuthGuardService],\r\n    children: [\r\n      {\r\n        path: '',\r\n        canActivateChild: [AuthGuardService],\r\n        children: [\r\n          {\r\n            path: '',\r\n            component: TodolistComponent\r\n          },\r\n          {\r\n            path: 'learn-more',\r\n            component: LearnMoreComponent\r\n          },\r\n          {\r\n            path: '**',\r\n            component: NotFoundComponent\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(authenticatedRoutes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AuthenticatedRoutingModule {}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AuthenticatedComponent } from './authenticated/authenticated.component';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { AuthenticatedHeaderComponent } from './authenticated-header/authenticated-header.component';\nimport { AuthenticatedMenuComponent } from './authenticated-menu/authenticated-menu.component';\nimport { LearnMoreModule } from './learn-more/learn-more.module';\nimport { NotFoundModule } from './not-found/not-found.module';\nimport { TodolistModule } from './todolist/todolist.module';\nimport { AuthenticatedRoutingModule } from './authenticated-routing.module';\n@NgModule({\n  declarations: [\n    AuthenticatedComponent,\n    AuthenticatedHeaderComponent,\n    AuthenticatedMenuComponent\n  ],\n  imports: [\n    CommonModule,\n    AuthenticatedRoutingModule,\n    MatBadgeModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    LearnMoreModule,\n    NotFoundModule,\n    TodolistModule\n  ]\n})\nexport class AuthenticatedModule {}\n","<app-authenticated-header\n  [expandedMenu]=\"expandedMenu\"\n  (toggleMenu)=\"toggleMenu()\"\n></app-authenticated-header>\n<mat-sidenav-container>\n  <mat-sidenav mode=\"side\" [opened]=\"expandedMenu\"\n    ><app-authenticated-menu\n      (toggleMenu)=\"toggleMenu()\"\n    ></app-authenticated-menu\n  ></mat-sidenav>\n  <mat-sidenav-content><router-outlet></router-outlet></mat-sidenav-content>\n</mat-sidenav-container>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-authenticated',\n  templateUrl: './authenticated.component.html',\n  styleUrls: ['./authenticated.component.css']\n})\nexport class AuthenticatedComponent {\n  expandedMenu = false;\n\n  toggleMenu() {\n    this.expandedMenu = !this.expandedMenu;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LearnMoreComponent } from './learn-more/learn-more.component';\n\n@NgModule({\n  declarations: [LearnMoreComponent],\n  imports: [CommonModule]\n})\nexport class LearnMoreModule {}\n","<div>\n  <h4>App</h4>\n  <p>\n    This app makes you able to maintain your todos up-to-date. Multiple users\n    can access and edit the todos in parallel*.\n  </p>\n  <p>\n    <em\n      >Parallel: users have to share the same local storage (be on same\n      browser)</em\n    >\n  </p>\n  <h4>APIs</h4>\n  <p>\n    For the sake of the demo, all the API calls are mocked. In order to be as\n    realistic as possible they are delayed and subject to failures. Any data\n    that needs to be persisted such as Authentication tokens or todos are stored\n    within the local storage of the browser in use.\n  </p>\n  <h4>Revoke token</h4>\n  <p>\n    The token used and stored to keep the user connected to the API can be\n    revoked by updating the value of <em>window.validToken</em> in the console\n    or by clicking\n    <button (click)=\"resetToken()\">\n      here</button\n    >.\n  </p>\n</div>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-learn-more',\n  templateUrl: './learn-more.component.html',\n  styleUrls: ['./learn-more.component.css']\n})\nexport class LearnMoreComponent {\n  resetToken() {\n    (window as any).validToken = Math.random()\n      .toString(16)\n      .substr(2);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { NotFoundComponent } from './not-found/not-found.component';\n\n@NgModule({\n  declarations: [NotFoundComponent],\n  imports: [CommonModule, MatButtonModule, MatCardModule]\n})\nexport class NotFoundModule {}\n","<div id=\"content\">\n  <mat-card>\n    <img\n      mat-card-image\n      src=\"https://upload.wikimedia.org/wikipedia/commons/0/07/Wrong_Way_Go_Back.svg\"\n      alt=\"Back home\"\n    />\n    <mat-card-header>\n      <mat-card-title>Wrong way</mat-card-title>\n      <mat-card-subtitle\n        >The page you are looking for does not exist</mat-card-subtitle\n      >\n    </mat-card-header>\n    <mat-card-content></mat-card-content>\n    <mat-card-actions>\n      <button mat-button (click)=\"backHome()\">\n        Back home\n      </button>\n    </mat-card-actions>\n  </mat-card>\n</div>\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-not-found',\n  templateUrl: './not-found.component.html',\n  styleUrls: ['./not-found.component.css']\n})\nexport class NotFoundComponent {\n  constructor(readonly router: Router) {}\n\n  backHome() {\n    this.router.navigate(['/']);\n  }\n}\n","<mat-card>\n  <mat-checkbox\n    [checked]=\"content.done\"\n    [disabled]=\"state !== 'noop'\"\n    (click)=\"toggleTodo.emit()\"\n  ></mat-checkbox>\n  <span\n    class=\"todo-label\"\n    [class.remove]=\"state === 'remove'\"\n    [class.noaction]=\"state !== 'noop'\"\n    >{{ content.task }}</span\n  >\n  <mat-icon *ngIf=\"state !== 'noop'\">refresh</mat-icon>\n  <button mat-icon-button aria-label=\"Delete todo\" (click)=\"removeTodo.emit()\">\n    <mat-icon>delete</mat-icon>\n  </button>\n</mat-card>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { TodoSyncState } from 'src/state/todolist/todolist.model';\nimport * as Api from '../../../../api';\n\n@Component({\n  selector: 'app-todolist-list-item',\n  templateUrl: './todolist-list-item.component.html',\n  styleUrls: ['./todolist-list-item.component.css']\n})\nexport class TodolistListItemComponent {\n  @Input()\n  state: TodoSyncState;\n\n  @Input()\n  content: Api.Todo;\n\n  @Output()\n  toggleTodo = new EventEmitter<void>();\n\n  @Output()\n  removeTodo = new EventEmitter<void>();\n}\n","<div>\n  <app-todolist-list-item\n    *ngFor=\"let todo of todos\"\n    [state]=\"todo.state\"\n    [content]=\"todo.data\"\n    (toggleTodo)=\"toggleTodo.emit(todo.data.guid)\"\n    (removeTodo)=\"removeTodo.emit(todo.data.guid)\"\n  ></app-todolist-list-item>\n</div>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { TodolistStateModel } from 'src/state/todolist/todolist.model';\n\n@Component({\n  selector: 'app-todolist-list',\n  templateUrl: './todolist-list.component.html',\n  styleUrls: ['./todolist-list.component.css']\n})\nexport class TodolistListComponent {\n  @Input()\n  todos: TodolistStateModel['todos'];\n\n  @Output()\n  toggleTodo = new EventEmitter<string>();\n\n  @Output()\n  removeTodo = new EventEmitter<string>();\n}\n","<div class=\"add-todo-area\">\n  <mat-form-field class=\"add-todo-field\">\n    <input\n      #taskNameBox\n      matInput\n      placeholder=\"Add a new todo\"\n      value=\"\"\n      [value]=\"taskName\"\n      (input)=\"taskName = taskNameBox.value\"\n      (keyup.enter)=\"add()\"\n    />\n  </mat-form-field>\n  <mat-icon *ngIf=\"!ready\">refresh</mat-icon>\n  <button mat-button (click)=\"add()\" [disabled]=\"taskName === ''\">\n    Add\n  </button>\n</div>\n","import { Component, EventEmitter, Output, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-todolist-new-item',\n  templateUrl: './todolist-new-item.component.html',\n  styleUrls: ['./todolist-new-item.component.css']\n})\nexport class TodolistNewItemComponent {\n  @Input()\n  ready: boolean;\n\n  @Output()\n  addTodo = new EventEmitter<string>();\n\n  taskName = '';\n\n  add() {\n    this.addTodo.emit(this.taskName);\n    this.taskName = '';\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TodolistComponent } from './todolist/todolist.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { TodolistNewItemComponent } from './todolist-new-item/todolist-new-item.component';\nimport { TodolistListComponent } from './todolist-list/todolist-list.component';\nimport { TodolistListItemComponent } from './todolist-list-item/todolist-list-item.component';\n\n@NgModule({\n  declarations: [\n    TodolistComponent,\n    TodolistNewItemComponent,\n    TodolistListComponent,\n    TodolistListItemComponent\n  ],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatInputModule,\n    MatSnackBarModule\n  ]\n})\nexport class TodolistModule {}\n","import { Injectable, OnInit, OnDestroy } from '@angular/core';\nimport * as Api from '../../../api';\nimport { Observable } from 'rxjs';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Store, Select } from '@ngxs/store';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\nimport { TryLogout } from 'src/state/authentication/authentication.actions';\nimport {\n  RefreshTodos,\n  UpdateRefreshStatus\n} from 'src/state/todolist/todolist.actions';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TodolistService {\n  @Select(AuthenticationState.token)\n  token$: Observable<string>;\n\n  private token = '';\n\n  private todoListenerHandle: Api.TodoListenerHandle | null;\n  private requesters = new Set<OnInit & OnDestroy>();\n\n  constructor(readonly store: Store, readonly snackBar: MatSnackBar) {\n    this.token$.subscribe(token => {\n      this.token = token;\n      if (this.requesters.size !== 0) {\n        this.unregisterTodoListener();\n        this.registerTodoListener();\n      }\n    });\n  }\n\n  private registerTodoListener() {\n    this.store.dispatch(new UpdateRefreshStatus(true));\n    this.todoListenerHandle = Api.addTodoListener(\n      this.token,\n      todos => {\n        this.store.dispatch(new RefreshTodos(todos));\n      },\n      () => {\n        this.snackBar.open('Revoked token, connection lost', '', {\n          duration: 1000\n        });\n        this.store.dispatch(new TryLogout(true));\n      }\n    );\n  }\n\n  private unregisterTodoListener() {\n    Api.removeTodoListener(this.todoListenerHandle);\n    this.store.dispatch(new UpdateRefreshStatus(false));\n  }\n\n  addRequester(requester: OnInit & OnDestroy) {\n    if (this.requesters.size === 0) {\n      this.registerTodoListener();\n    }\n    this.requesters.add(requester);\n  }\n\n  removeRequester(requester: OnInit & OnDestroy) {\n    if (!this.requesters.has(requester)) {\n      return;\n    }\n    this.requesters.delete(requester);\n    if (this.requesters.size === 0) {\n      this.unregisterTodoListener();\n    }\n  }\n}\n","<div *ngIf=\"todoState$ | async as todoState; else waitingForTodos\">\n  <app-todolist-new-item\n    [ready]=\"todoState.ready\"\n    (addTodo)=\"addTodo($event)\"\n  ></app-todolist-new-item>\n  <app-todolist-list\n    [todos]=\"todoState.todos\"\n    (toggleTodo)=\"toggleTodo($event)\"\n    (removeTodo)=\"removeTodo($event)\"\n  ></app-todolist-list>\n</div>\n<ng-template #waitingForTodos>Waiting for todos...</ng-template>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { TodolistService } from '../todolist.service';\nimport { Observable } from 'rxjs';\nimport { TodolistState } from 'src/state/todolist/todolist.state';\nimport { Select, Store } from '@ngxs/store';\nimport {\n  TryAddTodo,\n  TryRemoveTodo,\n  TryToggleTodo\n} from 'src/state/todolist/todolist.actions';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\n\n@Component({\n  selector: 'app-todolist',\n  templateUrl: './todolist.component.html',\n  styleUrls: ['./todolist.component.css']\n})\nexport class TodolistComponent implements OnInit, OnDestroy {\n  @Select(AuthenticationState.token)\n  token$: Observable<string>;\n\n  @Select(TodolistState)\n  todoState$: Observable<TodolistState>;\n\n  constructor(\n    readonly store: Store,\n    readonly todolistService: TodolistService\n  ) {}\n\n  ngOnInit() {\n    this.todolistService.addRequester(this);\n  }\n\n  ngOnDestroy() {\n    this.todolistService.removeRequester(this);\n  }\n\n  addTodo(taskName: string) {\n    this.store.dispatch(\n      new TryAddTodo(\n        this.store.selectSnapshot(AuthenticationState.token),\n        taskName\n      )\n    );\n  }\n\n  toggleTodo(guid: string) {\n    this.store.dispatch(\n      new TryToggleTodo(\n        this.store.selectSnapshot(AuthenticationState.token),\n        guid\n      )\n    );\n  }\n\n  removeTodo(guid: string) {\n    this.store.dispatch(\n      new TryRemoveTodo(\n        this.store.selectSnapshot(AuthenticationState.token),\n        guid\n      )\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { LoginComponent } from './login/login.component';\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatCardModule,\n    MatInputModule,\n    MatIconModule,\n    MatFormFieldModule\n  ]\n})\nexport class LoginModule {}\n","<div id=\"content\">\n  <mat-card *ngIf=\"authStatus$ | async as authStatus\">\n    <img\n      mat-card-image\n      src=\"https://upload.wikimedia.org/wikipedia/commons/f/f6/Eiffel_Tower_and_the_Trocadero%2C_Exposition_Universal%2C_1900%2C_Paris%2C_France.jpg\"\n      alt=\"Eiffel Tower\"\n    />\n    <mat-card-header>\n      <mat-card-title>Welcome to TodoList Angular NgXs</mat-card-title>\n      <mat-card-subtitle>Try with password: “password”</mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <mat-form-field>\n        <input\n          #usernameBox\n          matInput\n          placeholder=\"Username\"\n          [value]=\"username\"\n          (input)=\"username = usernameBox.value\"\n          (keyup.enter)=\"login(authStatus)\"\n        />\n      </mat-form-field>\n      <mat-form-field>\n        <input\n          #passwordBox\n          matInput\n          placeholder=\"Password\"\n          [type]=\"hide ? 'password' : 'text'\"\n          [value]=\"password\"\n          (input)=\"password = passwordBox.value\"\n          (keyup.enter)=\"login(authStatus)\"\n        /><button\n          mat-icon-button\n          matSuffix\n          (click)=\"hide = !hide\"\n          [attr.aria-label]=\"'Hide password'\"\n          [attr.aria-pressed]=\"hide\"\n        >\n          <mat-icon>{{ hide ? \"visibility_off\" : \"visibility\" }}</mat-icon>\n        </button></mat-form-field\n      >\n    </mat-card-content>\n    <mat-card-actions>\n      <button\n        mat-button\n        [disabled]=\"!canLogin(authStatus)\"\n        (click)=\"login(authStatus)\"\n      >\n        {{ onGoingLogin(authStatus) ? \"...\" : \"Login\" }}\n      </button>\n    </mat-card-actions>\n  </mat-card>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Subscription, Observable } from 'rxjs';\nimport { AuthenticationStatus } from 'src/state/authentication/authentication.model';\nimport { AuthenticationState } from 'src/state/authentication/authentication.state';\nimport { Select, Store } from '@ngxs/store';\nimport { TryLoginByCreds } from 'src/state/authentication/authentication.actions';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  @Select(AuthenticationState.status)\n  authStatus$: Observable<AuthenticationStatus>;\n\n  subscription: Subscription = new Subscription();\n  redirect?: string;\n\n  username = '';\n  password = '';\n  hide = true;\n\n  constructor(\n    readonly store: Store,\n    readonly router: Router,\n    readonly route: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.route.queryParams.subscribe(\n        params => (this.redirect = params.redirect)\n      )\n    );\n    this.subscription.add(\n      this.authStatus$.subscribe(s => {\n        if (s !== AuthenticationStatus.Authenticated) {\n          return;\n        }\n        this.router.navigate([this.redirect || '/']);\n      })\n    );\n  }\n\n  canLogin(authStatus: AuthenticationStatus) {\n    return (\n      authStatus === AuthenticationStatus.NonAuthenticated &&\n      this.username.length > 0 &&\n      this.password.length > 0\n    );\n  }\n\n  onGoingLogin(authStatus: AuthenticationStatus) {\n    return authStatus === AuthenticationStatus.OnGoingAuthentication;\n  }\n\n  login(authStatus: AuthenticationStatus) {\n    if (!this.canLogin(authStatus)) {\n      return;\n    }\n    this.store.dispatch(new TryLoginByCreds(this.username, this.password));\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","export class TryLoginByCreds {\r\n  static readonly type = '[Authentication] Try login by creds';\r\n  constructor(public username: string, public password: string) {}\r\n}\r\n\r\nexport class TryLoginByToken {\r\n  static readonly type = '[Authentication] Try login by token';\r\n  constructor() {}\r\n}\r\n\r\nexport class TryLogout {\r\n  static readonly type = '[Authentication] Try logout';\r\n  constructor(public silent?: boolean) {}\r\n}\r\n","export enum AuthenticationStatus {\r\n  NonAuthenticated = 'NonAuthenticated',\r\n  OnGoingAuthentication = 'OnGoingAuthentication',\r\n  Authenticated = 'Authenticated'\r\n}\r\n\r\nexport interface AuthenticationStateModel {\r\n  token: string;\r\n  username: string;\r\n  status: AuthenticationStatus;\r\n}\r\n","import { State, Action, StateContext, Selector } from '@ngxs/store';\r\nimport {\r\n  AuthenticationStateModel,\r\n  AuthenticationStatus\r\n} from './authentication.model';\r\nimport * as Api from '../../api';\r\nimport { Router } from '@angular/router';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  TryLoginByCreds,\r\n  TryLoginByToken,\r\n  TryLogout\r\n} from './authentication.actions';\r\n\r\n@State<AuthenticationStateModel>({\r\n  name: 'authenticationState',\r\n  defaults: {\r\n    username: Api.readStorage('AuthenticationProvider', 'username'),\r\n    token: Api.readStorage('AuthenticationProvider', 'token'),\r\n    status: AuthenticationStatus.NonAuthenticated\r\n  }\r\n})\r\nexport class AuthenticationState {\r\n  @Selector()\r\n  static isAuthenticated(state: AuthenticationStateModel) {\r\n    return state.status === AuthenticationStatus.Authenticated;\r\n  }\r\n\r\n  @Selector()\r\n  static username(state: AuthenticationStateModel) {\r\n    return state.username;\r\n  }\r\n\r\n  @Selector()\r\n  static token(state: AuthenticationStateModel) {\r\n    return state.token;\r\n  }\r\n\r\n  @Selector()\r\n  static status(state: AuthenticationStateModel) {\r\n    return state.status;\r\n  }\r\n\r\n  constructor(readonly router: Router, readonly snackBar: MatSnackBar) {}\r\n\r\n  @Action(TryLoginByCreds)\r\n  async tryLoginByCreds(\r\n    { getState, patchState }: StateContext<AuthenticationStateModel>,\r\n    { username, password }: TryLoginByCreds\r\n  ) {\r\n    patchState({\r\n      token: '',\r\n      username,\r\n      status: AuthenticationStatus.OnGoingAuthentication\r\n    });\r\n    try {\r\n      const tokens = await Api.login(username, password);\r\n      patchState({\r\n        token: tokens.token,\r\n        username: tokens.username,\r\n        status: AuthenticationStatus.Authenticated\r\n      });\r\n      Api.writeStorage('AuthenticationProvider', 'username', tokens.username);\r\n      Api.writeStorage('AuthenticationProvider', 'token', tokens.token);\r\n      this.snackBar.open('Login successful', '', {\r\n        duration: 1000\r\n      });\r\n    } catch (err) {\r\n      patchState({\r\n        token: '',\r\n        username,\r\n        status: AuthenticationStatus.NonAuthenticated\r\n      });\r\n      this.snackBar.open('Login failure', '', {\r\n        duration: 1000\r\n      });\r\n    }\r\n  }\r\n\r\n  @Action(TryLoginByToken)\r\n  async tryLoginByToken(\r\n    { getState, patchState }: StateContext<AuthenticationStateModel>,\r\n    {  }: TryLoginByToken\r\n  ) {\r\n    const { token, username } = getState();\r\n    if (token === '') {\r\n      return;\r\n    }\r\n\r\n    patchState({\r\n      token,\r\n      username,\r\n      status: AuthenticationStatus.OnGoingAuthentication\r\n    });\r\n    try {\r\n      const valid = await Api.checkToken(token);\r\n      if (valid) {\r\n        patchState({\r\n          token,\r\n          username,\r\n          status: AuthenticationStatus.Authenticated\r\n        });\r\n        this.snackBar.open('Login successful', '', {\r\n          duration: 1000\r\n        });\r\n        return;\r\n      }\r\n    } catch (err) {}\r\n    patchState({\r\n      token,\r\n      username,\r\n      status: AuthenticationStatus.NonAuthenticated\r\n    });\r\n  }\r\n\r\n  @Action(TryLogout)\r\n  async tryLogout(\r\n    { getState, patchState }: StateContext<AuthenticationStateModel>,\r\n    { silent }: TryLogout\r\n  ) {\r\n    patchState({\r\n      token: '',\r\n      username: '',\r\n      status: AuthenticationStatus.NonAuthenticated\r\n    });\r\n    Api.clearStorage('AuthenticationProvider', 'username');\r\n    Api.clearStorage('AuthenticationProvider', 'token');\r\n    if (!silent) {\r\n      this.snackBar.open('Logout successful', '', {\r\n        duration: 1000\r\n      });\r\n    }\r\n    this.router.navigate(['/login'], {\r\n      queryParams: {\r\n        redirect: this.router.routerState.snapshot.url\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as Api from '../../api';\r\n\r\nexport class RefreshTodos {\r\n  static readonly type = '[Todolist] Refresh todos';\r\n  constructor(public todos: Api.Todo[]) {}\r\n}\r\n\r\nexport class UpdateRefreshStatus {\r\n  static readonly type = '[Todolist] Update refresh status';\r\n  constructor(public status: boolean) {}\r\n}\r\n\r\nexport class TryAddTodo {\r\n  static readonly type = '[Todolist] Try add todo';\r\n  constructor(public token: string, public task: string) {}\r\n}\r\n\r\nexport class TryToggleTodo {\r\n  static readonly type = '[Todolist] Try toggle todo';\r\n  constructor(public token: string, public guid: string) {}\r\n}\r\n\r\nexport class TryRemoveTodo {\r\n  static readonly type = '[Todolist] Try remove todo';\r\n  constructor(public token: string, public guid: string) {}\r\n}\r\n","import * as Api from '../../api';\r\n\r\nexport enum TodoSyncState {\r\n  Noop = 'noop',\r\n  Add = 'add',\r\n  Edit = 'edit',\r\n  Remove = 'remove'\r\n}\r\n\r\nexport interface TodolistStateModel {\r\n  readonly ready: boolean;\r\n  readonly todos: ReadonlyArray<{\r\n    readonly data: Api.Todo;\r\n    readonly state: TodoSyncState;\r\n  }>;\r\n}\r\n","import { TodolistStateModel, TodoSyncState } from './todolist.model';\r\nimport { State, Action, StateContext, Selector } from '@ngxs/store';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  RefreshTodos,\r\n  TryAddTodo,\r\n  TryToggleTodo,\r\n  TryRemoveTodo,\r\n  UpdateRefreshStatus\r\n} from './todolist.actions';\r\nimport * as Api from '../../api';\r\n\r\n@State<TodolistStateModel>({\r\n  name: 'todolistState',\r\n  defaults: { ready: false, todos: [] }\r\n})\r\nexport class TodolistState {\r\n  @Selector()\r\n  static numTodos(state: TodolistStateModel) {\r\n    return state.todos.length;\r\n  }\r\n\r\n  constructor(readonly snackBar: MatSnackBar) {}\r\n\r\n  @Action(RefreshTodos)\r\n  refreshTodos(\r\n    { getState, patchState }: StateContext<TodolistStateModel>,\r\n    { todos }: RefreshTodos\r\n  ) {\r\n    const state = getState();\r\n    const todosBeingAdded: {\r\n      [guid: string]: Api.Todo;\r\n    } = state.todos\r\n      .filter(t => t.state === TodoSyncState.Add)\r\n      .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n    const todosBeingEdited: {\r\n      [guid: string]: Api.Todo;\r\n    } = state.todos\r\n      .filter(t => t.state === TodoSyncState.Edit)\r\n      .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n    const todosBeingRemoved: {\r\n      [guid: string]: Api.Todo;\r\n    } = state.todos\r\n      .filter(t => t.state === TodoSyncState.Remove)\r\n      .reduce((acc, t) => ({ ...acc, [t.data.guid]: t.data }), {});\r\n\r\n    const updatedTodos = todos\r\n      .filter(t => todosBeingAdded[t.guid] === undefined)\r\n      .map(t => {\r\n        // Remove, Edit and Noop\r\n        if (todosBeingEdited[t.guid]) {\r\n          return {\r\n            state: TodoSyncState.Edit,\r\n            data: todosBeingEdited[t.guid]\r\n          };\r\n        }\r\n        if (todosBeingRemoved[t.guid]) {\r\n          return {\r\n            state: TodoSyncState.Remove,\r\n            data: todosBeingRemoved[t.guid]\r\n          };\r\n        }\r\n        return { state: TodoSyncState.Noop, data: t };\r\n      })\r\n      .concat(state.todos.filter(t => t.state === TodoSyncState.Add)); // Add\r\n\r\n    patchState({ todos: updatedTodos });\r\n  }\r\n\r\n  @Action(UpdateRefreshStatus)\r\n  updateRefreshStatus(\r\n    { getState, patchState }: StateContext<TodolistStateModel>,\r\n    { status }: UpdateRefreshStatus\r\n  ) {\r\n    patchState({ ready: status });\r\n  }\r\n\r\n  @Action(TryAddTodo)\r\n  async tryAddTodo(\r\n    { getState, patchState }: StateContext<TodolistStateModel>,\r\n    { token, task }: TryAddTodo\r\n  ) {\r\n    const todo: Api.Todo = {\r\n      guid: Math.random()\r\n        .toString(16)\r\n        .substr(2),\r\n      task,\r\n      done: false\r\n    };\r\n    patchState({\r\n      todos: [...getState().todos, { state: TodoSyncState.Add, data: todo }]\r\n    });\r\n    const r = await Api.addTodo(token, todo);\r\n    if (r) {\r\n      patchState({\r\n        todos: getState().todos.map(t =>\r\n          t.data.guid === todo.guid\r\n            ? { state: TodoSyncState.Noop, data: todo }\r\n            : t\r\n        )\r\n      });\r\n    } else {\r\n      patchState({\r\n        todos: getState().todos.filter(t => t.data.guid !== todo.guid)\r\n      });\r\n      this.snackBar.open(`Failed to add todo: ${todo.task}`, '', {\r\n        duration: 1000\r\n      });\r\n    }\r\n  }\r\n\r\n  @Action(TryToggleTodo)\r\n  async tryToggleTodo(\r\n    { getState, patchState }: StateContext<TodolistStateModel>,\r\n    { token, guid }: TryToggleTodo\r\n  ) {\r\n    const todo = getState().todos.find(\r\n      t => t.data.guid === guid && t.state === TodoSyncState.Noop\r\n    );\r\n    if (!todo) {\r\n      this.snackBar.open(\r\n        `No todo available for modification given guid ${guid}`,\r\n        '',\r\n        {\r\n          duration: 1000\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newData = { ...todo.data, done: !todo.data.done };\r\n    patchState({\r\n      todos: [\r\n        ...getState().todos.map(t =>\r\n          t.data.guid === guid\r\n            ? {\r\n                state: TodoSyncState.Edit,\r\n                data: newData\r\n              }\r\n            : t\r\n        )\r\n      ]\r\n    });\r\n    const r = await Api.editTodo(token, newData);\r\n    if (r) {\r\n      patchState({\r\n        todos: getState().todos.map(t =>\r\n          t.data.guid === guid\r\n            ? {\r\n                state: TodoSyncState.Noop,\r\n                data: newData\r\n              }\r\n            : t\r\n        )\r\n      });\r\n    } else {\r\n      patchState({\r\n        todos: getState().todos.map(t =>\r\n          t.data.guid === guid\r\n            ? { state: TodoSyncState.Noop, data: todo.data }\r\n            : t\r\n        )\r\n      });\r\n      this.snackBar.open(`Failed to edit todo: ${todo.data.task}`, '', {\r\n        duration: 1000\r\n      });\r\n    }\r\n  }\r\n\r\n  @Action(TryRemoveTodo)\r\n  async tryRemoveTodo(\r\n    { getState, patchState }: StateContext<TodolistStateModel>,\r\n    { token, guid }: TryRemoveTodo\r\n  ) {\r\n    const todo = getState().todos.find(\r\n      t => t.data.guid === guid && t.state === TodoSyncState.Noop\r\n    );\r\n    if (!todo) {\r\n      this.snackBar.open(\r\n        `No todo available for modification given guid ${guid}`,\r\n        '',\r\n        {\r\n          duration: 1000\r\n        }\r\n      );\r\n      return;\r\n    }\r\n    patchState({\r\n      todos: [\r\n        ...getState().todos.map(t =>\r\n          t.data.guid === guid\r\n            ? {\r\n                state: TodoSyncState.Remove,\r\n                data: todo.data\r\n              }\r\n            : t\r\n        )\r\n      ]\r\n    });\r\n    const r = await Api.removeTodo(token, todo.data);\r\n    if (r) {\r\n      patchState({ todos: getState().todos.filter(t => t.data.guid !== guid) });\r\n    } else {\r\n      patchState({\r\n        todos: getState().todos.map(t =>\r\n          t.data.guid === guid\r\n            ? { state: TodoSyncState.Noop, data: todo.data }\r\n            : t\r\n        )\r\n      });\r\n      this.snackBar.open(`Failed to remove todo: ${todo.data.task}`, '', {\r\n        duration: 1000\r\n      });\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}